{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/booking.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction MyBookingsComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 4);\n    i0.ÉµÉµelement(1, \"i\", 5);\n    i0.ÉµÉµelementStart(2, \"p\", 6);\n    i0.ÉµÉµtext(3, \"You have not booked any batches yet.\");\n    i0.ÉµÉµelementEnd()();\n  }\n}\nfunction MyBookingsComponent_div_4_ng_container_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"div\", 10)(1, \"div\", 11)(2, \"h5\", 12);\n    i0.ÉµÉµtext(3);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(4, \"p\", 13);\n    i0.ÉµÉµelement(5, \"i\", 14);\n    i0.ÉµÉµtext(6);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(7, \"p\", 13);\n    i0.ÉµÉµelement(8, \"i\", 15);\n    i0.ÉµÉµtext(9);\n    i0.ÉµÉµpipe(10, \"date\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(11, \"p\", 16);\n    i0.ÉµÉµelement(12, \"i\", 17);\n    i0.ÉµÉµtext(13);\n    i0.ÉµÉµpipe(14, \"date\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(15, \"span\", 18);\n    i0.ÉµÉµtext(16, \"Pending\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(17, \"div\", 19)(18, \"button\", 20);\n    i0.ÉµÉµlistener(\"click\", function MyBookingsComponent_div_4_ng_container_1_div_1_Template_button_click_18_listener() {\n      i0.ÉµÉµrestoreView(_r7);\n      const booking_r3 = i0.ÉµÉµnextContext().$implicit;\n      const ctx_r5 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r5.makePayment(booking_r3));\n    });\n    i0.ÉµÉµtext(19, \" Pay Now \");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(20, \"button\", 21);\n    i0.ÉµÉµlistener(\"click\", function MyBookingsComponent_div_4_ng_container_1_div_1_Template_button_click_20_listener() {\n      i0.ÉµÉµrestoreView(_r7);\n      const booking_r3 = i0.ÉµÉµnextContext().$implicit;\n      const ctx_r8 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r8.cancelBooking(booking_r3));\n    });\n    i0.ÉµÉµtext(21, \" Cancel \");\n    i0.ÉµÉµelementEnd()()()();\n  }\n  if (rf & 2) {\n    const booking_r3 = i0.ÉµÉµnextContext().$implicit;\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate(booking_r3.batch == null ? null : booking_r3.batch.batchName);\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate1(\" Instructor: \", booking_r3.batch == null ? null : booking_r3.batch.instructor == null ? null : booking_r3.batch.instructor.name, \" \");\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate1(\" Start Date: \", i0.ÉµÉµpipeBind1(10, 4, booking_r3.batch == null ? null : booking_r3.batch.startDate), \" \");\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµtextInterpolate1(\" Booked on: \", i0.ÉµÉµpipeBind1(14, 6, booking_r3.bookingDate), \" \");\n  }\n}\nfunction MyBookingsComponent_div_4_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementContainerStart(0);\n    i0.ÉµÉµtemplate(1, MyBookingsComponent_div_4_ng_container_1_div_1_Template, 22, 8, \"div\", 9);\n    i0.ÉµÉµelementContainerEnd();\n  }\n  if (rf & 2) {\n    const booking_r3 = ctx.$implicit;\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngIf\", booking_r3.status !== \"Cancelled\");\n  }\n}\nfunction MyBookingsComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 7);\n    i0.ÉµÉµtemplate(1, MyBookingsComponent_div_4_ng_container_1_Template, 2, 1, \"ng-container\", 8);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngForOf\", ctx_r1.bookings);\n  }\n}\nexport class MyBookingsComponent {\n  constructor(bookingService, router) {\n    this.bookingService = bookingService;\n    this.router = router;\n    this.bookings = [];\n  }\n  ngOnInit() {\n    this.loadBookings();\n  }\n  loadBookings() {\n    const userId = localStorage.getItem(\"userId\");\n    if (!userId) {\n      alert(\"Please login again.\");\n      this.router.navigate(['/login']);\n      return;\n    }\n    this.bookingService.getBookingsByUser(userId).subscribe({\n      next: res => this.bookings = res,\n      error: err => console.error(err)\n    });\n  }\n  makePayment(booking) {\n    this.router.navigate(['/user/payment'], {\n      state: {\n        bookingId: booking.bookingId,\n        amount: booking.batch.price\n      }\n    });\n  }\n  cancelBooking(booking) {\n    if (!booking?.bookingId) {\n      console.error('Invalid booking object', booking);\n      return;\n    }\n    if (!confirm('Are you sure you want to cancel this booking?')) return;\n    this.bookingService.cancelBooking(booking.bookingId).subscribe({\n      next: () => {\n        // ðŸ”¥ REMOVE FROM UI\n        this.bookings = this.bookings.filter(b => b.bookingId !== booking.bookingId);\n      },\n      error: err => {\n        console.error(err);\n        alert(err.error?.message || 'Failed to cancel booking');\n      }\n    });\n  }\n  static {\n    this.Éµfac = function MyBookingsComponent_Factory(t) {\n      return new (t || MyBookingsComponent)(i0.ÉµÉµdirectiveInject(i1.BookingService), i0.ÉµÉµdirectiveInject(i2.Router));\n    };\n  }\n  static {\n    this.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n      type: MyBookingsComponent,\n      selectors: [[\"app-my-bookings\"]],\n      decls: 5,\n      vars: 2,\n      consts: [[1, \"container\", \"mt-4\"], [1, \"page-heading\", \"mb-4\"], [\"class\", \"text-center text-muted mt-5\", 4, \"ngIf\"], [\"class\", \"row g-4\", 4, \"ngIf\"], [1, \"text-center\", \"text-muted\", \"mt-5\"], [1, \"bi\", \"bi-info-circle\", \"fs-2\"], [1, \"mt-2\"], [1, \"row\", \"g-4\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"col-md-4\", 4, \"ngIf\"], [1, \"col-md-4\"], [1, \"card\", \"card-custom\", \"shadow-sm\"], [1, \"fw-bold\"], [1, \"text-muted\", \"mb-1\"], [1, \"bi\", \"bi-person-badge\"], [1, \"bi\", \"bi-calendar-event\"], [1, \"mb-2\"], [1, \"bi\", \"bi-clock-history\"], [1, \"badge\", \"bg-warning\", \"text-dark\"], [1, \"d-flex\", \"gap-2\", \"mt-3\"], [1, \"btn\", \"btn-primary-custom\", \"flex-fill\", 3, \"click\"], [1, \"btn\", \"btn-cancel-custom\", \"flex-fill\", 3, \"click\"]],\n      template: function MyBookingsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ÉµÉµelementStart(0, \"div\", 0)(1, \"h2\", 1);\n          i0.ÉµÉµtext(2, \"My Bookings\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµtemplate(3, MyBookingsComponent_div_3_Template, 4, 0, \"div\", 2);\n          i0.ÉµÉµtemplate(4, MyBookingsComponent_div_4_Template, 2, 1, \"div\", 3);\n          i0.ÉµÉµelementEnd();\n        }\n        if (rf & 2) {\n          i0.ÉµÉµadvance(3);\n          i0.ÉµÉµproperty(\"ngIf\", ctx.bookings.length === 0);\n          i0.ÉµÉµadvance(1);\n          i0.ÉµÉµproperty(\"ngIf\", ctx.bookings.length > 0);\n        }\n      },\n      dependencies: [i3.NgForOf, i3.NgIf, i3.DatePipe],\n      styles: [\"\\n\\n\\n\\n.page-heading[_ngcontent-%COMP%] {\\n  font-size: 32px;\\n  font-weight: 800;\\n  color: #2d2d2d;\\n}\\n\\n.page-heading[_ngcontent-%COMP%]{\\n  color: #7b2cbf;\\n}\\n\\n\\n\\n\\n\\n.card-custom[_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #fde7f3, #eadcff);\\n  border-radius: 16px;\\n  border: none;\\n  padding: 20px;\\n  min-height: 280px;              \\n\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-between;\\n  transition: transform 0.25s ease, box-shadow 0.25s ease;\\n}\\n\\n.card-custom[_ngcontent-%COMP%]:hover {\\n  transform: translateY(-4px);\\n  box-shadow: 0 12px 28px rgba(166, 107, 255, 0.25);\\n}\\n\\n\\n\\n\\n\\n.card-custom[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\\n  font-weight: 700;\\n  color: #2d2d2d;\\n  margin-bottom: 8px;\\n}\\n\\n\\n\\n\\n\\n.card-custom[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\\n  color: #7b2cbf;\\n  margin-right: 6px;\\n}\\n\\n\\n\\n\\n\\n.badge[_ngcontent-%COMP%] {\\n  padding: 6px 14px;\\n  border-radius: 14px;\\n  font-size: 13px;\\n  font-weight: 600;\\n}\\n\\n.bg-warning[_ngcontent-%COMP%] {\\n  background-color: #fff3b0 !important;\\n  color: #7b2cbf !important;\\n}\\n\\n\\n\\n\\n\\n.btn-primary-custom[_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #a66bff, #7b2cbf);\\n  color: #fff;\\n  font-weight: 600;\\n  border-radius: 12px;\\n  border: none;\\n  padding: 10px 0;\\n  transition: all 0.25s ease;\\n}\\n\\n.btn-primary-custom[_ngcontent-%COMP%]:hover {\\n  background: linear-gradient(135deg, #7b2cbf, #5a189a);\\n}\\n\\n.btn-cancel-custom[_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #ffd6e8, #ff9acb);\\n  color: #7b2cbf;\\n  font-weight: 600;\\n  border-radius: 12px;\\n  border: none;\\n  padding: 10px 0;\\n  transition: all 0.25s ease;\\n}\\n\\n.btn-cancel-custom[_ngcontent-%COMP%]:hover {\\n  background: linear-gradient(135deg, #ff9acb, #ff6f91);\\n  color: #fff;\\n}\\n\\n\\n\\n\\n\\n.container[_ngcontent-%COMP%] {\\n  animation: _ngcontent-%COMP%_fadeIn 0.4s ease-in-out;\\n}\\n\\n@keyframes _ngcontent-%COMP%_fadeIn {\\n  from {\\n    opacity: 0;\\n    transform: translateY(10px);\\n  }\\n  to {\\n    opacity: 1;\\n    transform: translateY(0);\\n  }\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdXNlci9teS1ib29raW5ncy9teS1ib29raW5ncy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzsyQkFFMkI7QUFDM0I7RUFDRSxlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxjQUFjO0FBQ2hCOztBQUVBOzsyQkFFMkI7QUFDM0I7RUFDRSxxREFBcUQ7RUFDckQsbUJBQW1CO0VBQ25CLFlBQVk7RUFDWixhQUFhO0VBQ2IsaUJBQWlCLGVBQWUseUJBQXlCO0VBQ3pELGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsOEJBQThCO0VBQzlCLHVEQUF1RDtBQUN6RDs7QUFFQTtFQUNFLDJCQUEyQjtFQUMzQixpREFBaUQ7QUFDbkQ7O0FBRUE7OzJCQUUyQjtBQUMzQjtFQUNFLGdCQUFnQjtFQUNoQixjQUFjO0VBQ2Qsa0JBQWtCO0FBQ3BCOztBQUVBOzsyQkFFMkI7QUFDM0I7RUFDRSxjQUFjO0VBQ2QsaUJBQWlCO0FBQ25COztBQUVBOzsyQkFFMkI7QUFDM0I7RUFDRSxpQkFBaUI7RUFDakIsbUJBQW1CO0VBQ25CLGVBQWU7RUFDZixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxvQ0FBb0M7RUFDcEMseUJBQXlCO0FBQzNCOztBQUVBOzsyQkFFMkI7QUFDM0I7RUFDRSxxREFBcUQ7RUFDckQsV0FBVztFQUNYLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsWUFBWTtFQUNaLGVBQWU7RUFDZiwwQkFBMEI7QUFDNUI7O0FBRUE7RUFDRSxxREFBcUQ7QUFDdkQ7O0FBRUE7RUFDRSxxREFBcUQ7RUFDckQsY0FBYztFQUNkLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsWUFBWTtFQUNaLGVBQWU7RUFDZiwwQkFBMEI7QUFDNUI7O0FBRUE7RUFDRSxxREFBcUQ7RUFDckQsV0FBVztBQUNiOztBQUVBOzsyQkFFMkI7QUFDM0I7RUFDRSxrQ0FBa0M7QUFDcEM7O0FBRUE7RUFDRTtJQUNFLFVBQVU7SUFDViwyQkFBMkI7RUFDN0I7RUFDQTtJQUNFLFVBQVU7SUFDVix3QkFBd0I7RUFDMUI7QUFDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qID09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgUEFHRSBIRUFESU5HXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuLnBhZ2UtaGVhZGluZyB7XHJcbiAgZm9udC1zaXplOiAzMnB4O1xyXG4gIGZvbnQtd2VpZ2h0OiA4MDA7XHJcbiAgY29sb3I6ICMyZDJkMmQ7XHJcbn1cclxuXHJcbi5wYWdlLWhlYWRpbmd7XHJcbiAgY29sb3I6ICM3YjJjYmY7XHJcbn1cclxuXHJcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgQ0FSRCBCQVNFIChTQU1FIEFTIE1BTkFHRSBCQVRDSEVTKVxyXG49PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcbi5jYXJkLWN1c3RvbSB7XHJcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2ZkZTdmMywgI2VhZGNmZik7XHJcbiAgYm9yZGVyLXJhZGl1czogMTZweDtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgcGFkZGluZzogMjBweDtcclxuICBtaW4taGVpZ2h0OiAyODBweDsgICAgICAgICAgICAgIC8qIMOwwp/ClMKlIEVYQUNUIGNhcmQgaGVpZ2h0ICovXHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4yNXMgZWFzZSwgYm94LXNoYWRvdyAwLjI1cyBlYXNlO1xyXG59XHJcblxyXG4uY2FyZC1jdXN0b206aG92ZXIge1xyXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNHB4KTtcclxuICBib3gtc2hhZG93OiAwIDEycHggMjhweCByZ2JhKDE2NiwgMTA3LCAyNTUsIDAuMjUpO1xyXG59XHJcblxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgIENBUkQgVElUTEVcclxuPT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG4uY2FyZC1jdXN0b20gaDUge1xyXG4gIGZvbnQtd2VpZ2h0OiA3MDA7XHJcbiAgY29sb3I6ICMyZDJkMmQ7XHJcbiAgbWFyZ2luLWJvdHRvbTogOHB4O1xyXG59XHJcblxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgIElDT05TXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuLmNhcmQtY3VzdG9tIGkge1xyXG4gIGNvbG9yOiAjN2IyY2JmO1xyXG4gIG1hcmdpbi1yaWdodDogNnB4O1xyXG59XHJcblxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgIFNUQVRVUyBCQURHRVxyXG49PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcbi5iYWRnZSB7XHJcbiAgcGFkZGluZzogNnB4IDE0cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogMTRweDtcclxuICBmb250LXNpemU6IDEzcHg7XHJcbiAgZm9udC13ZWlnaHQ6IDYwMDtcclxufVxyXG5cclxuLmJnLXdhcm5pbmcge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmYzYjAgIWltcG9ydGFudDtcclxuICBjb2xvcjogIzdiMmNiZiAhaW1wb3J0YW50O1xyXG59XHJcblxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgIEJVVFRPTlMgKFNBTUUgU1RZTEUpXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuLmJ0bi1wcmltYXJ5LWN1c3RvbSB7XHJcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2E2NmJmZiwgIzdiMmNiZik7XHJcbiAgY29sb3I6ICNmZmY7XHJcbiAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICBib3JkZXItcmFkaXVzOiAxMnB4O1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBwYWRkaW5nOiAxMHB4IDA7XHJcbiAgdHJhbnNpdGlvbjogYWxsIDAuMjVzIGVhc2U7XHJcbn1cclxuXHJcbi5idG4tcHJpbWFyeS1jdXN0b206aG92ZXIge1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM3YjJjYmYsICM1YTE4OWEpO1xyXG59XHJcblxyXG4uYnRuLWNhbmNlbC1jdXN0b20ge1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmZmQ2ZTgsICNmZjlhY2IpO1xyXG4gIGNvbG9yOiAjN2IyY2JmO1xyXG4gIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgYm9yZGVyLXJhZGl1czogMTJweDtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgcGFkZGluZzogMTBweCAwO1xyXG4gIHRyYW5zaXRpb246IGFsbCAwLjI1cyBlYXNlO1xyXG59XHJcblxyXG4uYnRuLWNhbmNlbC1jdXN0b206aG92ZXIge1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmZjlhY2IsICNmZjZmOTEpO1xyXG4gIGNvbG9yOiAjZmZmO1xyXG59XHJcblxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgIEZBREUgSU5cclxuPT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG4uY29udGFpbmVyIHtcclxuICBhbmltYXRpb246IGZhZGVJbiAwLjRzIGVhc2UtaW4tb3V0O1xyXG59XHJcblxyXG5Aa2V5ZnJhbWVzIGZhZGVJbiB7XHJcbiAgZnJvbSB7XHJcbiAgICBvcGFjaXR5OiAwO1xyXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDEwcHgpO1xyXG4gIH1cclxuICB0byB7XHJcbiAgICBvcGFjaXR5OiAxO1xyXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApO1xyXG4gIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ÉµÉµelementStart","ÉµÉµelement","ÉµÉµtext","ÉµÉµelementEnd","ÉµÉµlistener","MyBookingsComponent_div_4_ng_container_1_div_1_Template_button_click_18_listener","ÉµÉµrestoreView","_r7","booking_r3","ÉµÉµnextContext","$implicit","ctx_r5","ÉµÉµresetView","makePayment","MyBookingsComponent_div_4_ng_container_1_div_1_Template_button_click_20_listener","ctx_r8","cancelBooking","ÉµÉµadvance","ÉµÉµtextInterpolate","batch","batchName","ÉµÉµtextInterpolate1","instructor","name","ÉµÉµpipeBind1","startDate","bookingDate","ÉµÉµelementContainerStart","ÉµÉµtemplate","MyBookingsComponent_div_4_ng_container_1_div_1_Template","ÉµÉµelementContainerEnd","ÉµÉµproperty","status","MyBookingsComponent_div_4_ng_container_1_Template","ctx_r1","bookings","MyBookingsComponent","constructor","bookingService","router","ngOnInit","loadBookings","userId","localStorage","getItem","alert","navigate","getBookingsByUser","subscribe","next","res","error","err","console","booking","state","bookingId","amount","price","confirm","filter","b","message","ÉµÉµdirectiveInject","i1","BookingService","i2","Router","selectors","decls","vars","consts","template","MyBookingsComponent_Template","rf","ctx","MyBookingsComponent_div_3_Template","MyBookingsComponent_div_4_Template","length"],"sources":["C:\\Users\\Sagar\\OneDrive\\Desktop\\Hairstylist Amar\\HairstylistAmar-Client-Angular\\HairStylistAmar\\src\\app\\user\\my-bookings\\my-bookings.component.ts","C:\\Users\\Sagar\\OneDrive\\Desktop\\Hairstylist Amar\\HairstylistAmar-Client-Angular\\HairStylistAmar\\src\\app\\user\\my-bookings\\my-bookings.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { BookingService } from '../../services/booking.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-my-bookings',\n  templateUrl: './my-bookings.component.html',\n  styleUrls: ['./my-bookings.component.css']\n})\nexport class MyBookingsComponent implements OnInit {\n\n  bookings: any[] = [];\n\n\n  constructor(\n    private bookingService: BookingService,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n    this.loadBookings();\n  }\n\n  loadBookings() {\n    const userId = localStorage.getItem(\"userId\");\n\n    if (!userId) {\n      alert(\"Please login again.\");\n      this.router.navigate(['/login']);\n      return;\n    }\n\n    this.bookingService.getBookingsByUser(userId).subscribe({\n      next: (res: any) => this.bookings = res,\n      error: (err) => console.error(err)\n    });\n  }\n\n  makePayment(booking: any) {\n    this.router.navigate(['/user/payment'], {\n      state: {\n        bookingId: booking.bookingId,\n        amount: booking.batch.price\n      }\n    });\n  }\n\n  cancelBooking(booking: any) {\n  if (!booking?.bookingId) {\n    console.error('Invalid booking object', booking);\n    return;\n  }\n\n  if (!confirm('Are you sure you want to cancel this booking?')) return;\n\n  this.bookingService.cancelBooking(booking.bookingId).subscribe({\n    next: () => {\n      // ðŸ”¥ REMOVE FROM UI\n      this.bookings = this.bookings.filter(\n        b => b.bookingId !== booking.bookingId\n      );\n    },\n    error: (err) => {\n      console.error(err);\n      alert(err.error?.message || 'Failed to cancel booking');\n    }\n  });\n}\n\n\n\n\n\n\n}\n","<div class=\"container mt-4\">\n  <!-- Page Heading -->\n  <h2 class=\"page-heading mb-4\">My Bookings</h2>\n\n  <!-- No bookings -->\n  <div *ngIf=\"bookings.length === 0\" class=\"text-center text-muted mt-5\">\n    <i class=\"bi bi-info-circle fs-2\"></i>\n    <p class=\"mt-2\">You have not booked any batches yet.</p>\n  </div>\n\n  <!-- Bookings Grid -->\n  <div class=\"row g-4\" *ngIf=\"bookings.length > 0\">\n    <ng-container *ngFor=\"let booking of bookings\">\n      <div class=\"col-md-4\" *ngIf=\"booking.status !== 'Cancelled'\">\n        <div class=\"card card-custom shadow-sm\">\n\n          <h5 class=\"fw-bold\">{{ booking.batch?.batchName }}</h5>\n\n          <p class=\"text-muted mb-1\">\n            <i class=\"bi bi-person-badge\"></i>\n            Instructor: {{ booking.batch?.instructor?.name }}\n          </p>\n\n          <p class=\"text-muted mb-1\">\n            <i class=\"bi bi-calendar-event\"></i>\n            Start Date: {{ booking.batch?.startDate | date }}\n          </p>\n\n          <p class=\"mb-2\">\n            <i class=\"bi bi-clock-history\"></i>\n            Booked on: {{ booking.bookingDate | date }}\n          </p>\n\n          <!-- Status -->\n          <span class=\"badge bg-warning text-dark\">Pending</span>\n\n          <!-- Actions -->\n          <div class=\"d-flex gap-2 mt-3\">\n            <button\n              class=\"btn btn-primary-custom flex-fill\"\n              (click)=\"makePayment(booking)\">\n              Pay Now\n            </button>\n\n            <button\n              class=\"btn btn-cancel-custom flex-fill\"\n              (click)=\"cancelBooking(booking)\">\n              Cancel\n            </button>\n          </div>\n\n        </div>\n      </div>\n    </ng-container>\n  </div>\n</div>\n"],"mappings":";;;;;;ICKEA,EAAA,CAAAC,cAAA,aAAuE;IACrED,EAAA,CAAAE,SAAA,WAAsC;IACtCF,EAAA,CAAAC,cAAA,WAAgB;IAAAD,EAAA,CAAAG,MAAA,2CAAoC;IAAAH,EAAA,CAAAI,YAAA,EAAI;;;;;;IAMtDJ,EAAA,CAAAC,cAAA,cAA6D;IAGrCD,EAAA,CAAAG,MAAA,GAA8B;IAAAH,EAAA,CAAAI,YAAA,EAAK;IAEvDJ,EAAA,CAAAC,cAAA,YAA2B;IACzBD,EAAA,CAAAE,SAAA,YAAkC;IAClCF,EAAA,CAAAG,MAAA,GACF;IAAAH,EAAA,CAAAI,YAAA,EAAI;IAEJJ,EAAA,CAAAC,cAAA,YAA2B;IACzBD,EAAA,CAAAE,SAAA,YAAoC;IACpCF,EAAA,CAAAG,MAAA,GACF;;IAAAH,EAAA,CAAAI,YAAA,EAAI;IAEJJ,EAAA,CAAAC,cAAA,aAAgB;IACdD,EAAA,CAAAE,SAAA,aAAmC;IACnCF,EAAA,CAAAG,MAAA,IACF;;IAAAH,EAAA,CAAAI,YAAA,EAAI;IAGJJ,EAAA,CAAAC,cAAA,gBAAyC;IAAAD,EAAA,CAAAG,MAAA,eAAO;IAAAH,EAAA,CAAAI,YAAA,EAAO;IAGvDJ,EAAA,CAAAC,cAAA,eAA+B;IAG3BD,EAAA,CAAAK,UAAA,mBAAAC,iFAAA;MAAAN,EAAA,CAAAO,aAAA,CAAAC,GAAA;MAAA,MAAAC,UAAA,GAAAT,EAAA,CAAAU,aAAA,GAAAC,SAAA;MAAA,MAAAC,MAAA,GAAAZ,EAAA,CAAAU,aAAA;MAAA,OAASV,EAAA,CAAAa,WAAA,CAAAD,MAAA,CAAAE,WAAA,CAAAL,UAAA,CAAoB;IAAA,EAAC;IAC9BT,EAAA,CAAAG,MAAA,iBACF;IAAAH,EAAA,CAAAI,YAAA,EAAS;IAETJ,EAAA,CAAAC,cAAA,kBAEmC;IAAjCD,EAAA,CAAAK,UAAA,mBAAAU,iFAAA;MAAAf,EAAA,CAAAO,aAAA,CAAAC,GAAA;MAAA,MAAAC,UAAA,GAAAT,EAAA,CAAAU,aAAA,GAAAC,SAAA;MAAA,MAAAK,MAAA,GAAAhB,EAAA,CAAAU,aAAA;MAAA,OAASV,EAAA,CAAAa,WAAA,CAAAG,MAAA,CAAAC,aAAA,CAAAR,UAAA,CAAsB;IAAA,EAAC;IAChCT,EAAA,CAAAG,MAAA,gBACF;IAAAH,EAAA,CAAAI,YAAA,EAAS;;;;IAhCSJ,EAAA,CAAAkB,SAAA,GAA8B;IAA9BlB,EAAA,CAAAmB,iBAAA,CAAAV,UAAA,CAAAW,KAAA,kBAAAX,UAAA,CAAAW,KAAA,CAAAC,SAAA,CAA8B;IAIhDrB,EAAA,CAAAkB,SAAA,GACF;IADElB,EAAA,CAAAsB,kBAAA,kBAAAb,UAAA,CAAAW,KAAA,kBAAAX,UAAA,CAAAW,KAAA,CAAAG,UAAA,kBAAAd,UAAA,CAAAW,KAAA,CAAAG,UAAA,CAAAC,IAAA,MACF;IAIExB,EAAA,CAAAkB,SAAA,GACF;IADElB,EAAA,CAAAsB,kBAAA,kBAAAtB,EAAA,CAAAyB,WAAA,QAAAhB,UAAA,CAAAW,KAAA,kBAAAX,UAAA,CAAAW,KAAA,CAAAM,SAAA,OACF;IAIE1B,EAAA,CAAAkB,SAAA,GACF;IADElB,EAAA,CAAAsB,kBAAA,iBAAAtB,EAAA,CAAAyB,WAAA,QAAAhB,UAAA,CAAAkB,WAAA,OACF;;;;;IAnBN3B,EAAA,CAAA4B,uBAAA,GAA+C;IAC7C5B,EAAA,CAAA6B,UAAA,IAAAC,uDAAA,kBAuCM;IACR9B,EAAA,CAAA+B,qBAAA,EAAe;;;;IAxCU/B,EAAA,CAAAkB,SAAA,GAAoC;IAApClB,EAAA,CAAAgC,UAAA,SAAAvB,UAAA,CAAAwB,MAAA,iBAAoC;;;;;IAF/DjC,EAAA,CAAAC,cAAA,aAAiD;IAC/CD,EAAA,CAAA6B,UAAA,IAAAK,iDAAA,0BAyCe;IACjBlC,EAAA,CAAAI,YAAA,EAAM;;;;IA1C8BJ,EAAA,CAAAkB,SAAA,GAAW;IAAXlB,EAAA,CAAAgC,UAAA,YAAAG,MAAA,CAAAC,QAAA,CAAW;;;ADHjD,OAAM,MAAOC,mBAAmB;EAK9BC,YACUC,cAA8B,EAC9BC,MAAc;IADd,KAAAD,cAAc,GAAdA,cAAc;IACd,KAAAC,MAAM,GAANA,MAAM;IALhB,KAAAJ,QAAQ,GAAU,EAAE;EAMjB;EAEHK,QAAQA,CAAA;IACN,IAAI,CAACC,YAAY,EAAE;EACrB;EAEAA,YAAYA,CAAA;IACV,MAAMC,MAAM,GAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;IAE7C,IAAI,CAACF,MAAM,EAAE;MACXG,KAAK,CAAC,qBAAqB,CAAC;MAC5B,IAAI,CAACN,MAAM,CAACO,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;MAChC;;IAGF,IAAI,CAACR,cAAc,CAACS,iBAAiB,CAACL,MAAM,CAAC,CAACM,SAAS,CAAC;MACtDC,IAAI,EAAGC,GAAQ,IAAK,IAAI,CAACf,QAAQ,GAAGe,GAAG;MACvCC,KAAK,EAAGC,GAAG,IAAKC,OAAO,CAACF,KAAK,CAACC,GAAG;KAClC,CAAC;EACJ;EAEAvC,WAAWA,CAACyC,OAAY;IACtB,IAAI,CAACf,MAAM,CAACO,QAAQ,CAAC,CAAC,eAAe,CAAC,EAAE;MACtCS,KAAK,EAAE;QACLC,SAAS,EAAEF,OAAO,CAACE,SAAS;QAC5BC,MAAM,EAAEH,OAAO,CAACnC,KAAK,CAACuC;;KAEzB,CAAC;EACJ;EAEA1C,aAAaA,CAACsC,OAAY;IAC1B,IAAI,CAACA,OAAO,EAAEE,SAAS,EAAE;MACvBH,OAAO,CAACF,KAAK,CAAC,wBAAwB,EAAEG,OAAO,CAAC;MAChD;;IAGF,IAAI,CAACK,OAAO,CAAC,+CAA+C,CAAC,EAAE;IAE/D,IAAI,CAACrB,cAAc,CAACtB,aAAa,CAACsC,OAAO,CAACE,SAAS,CAAC,CAACR,SAAS,CAAC;MAC7DC,IAAI,EAAEA,CAAA,KAAK;QACT;QACA,IAAI,CAACd,QAAQ,GAAG,IAAI,CAACA,QAAQ,CAACyB,MAAM,CAClCC,CAAC,IAAIA,CAAC,CAACL,SAAS,KAAKF,OAAO,CAACE,SAAS,CACvC;MACH,CAAC;MACDL,KAAK,EAAGC,GAAG,IAAI;QACbC,OAAO,CAACF,KAAK,CAACC,GAAG,CAAC;QAClBP,KAAK,CAACO,GAAG,CAACD,KAAK,EAAEW,OAAO,IAAI,0BAA0B,CAAC;MACzD;KACD,CAAC;EACJ;;;uBA1Da1B,mBAAmB,EAAArC,EAAA,CAAAgE,iBAAA,CAAAC,EAAA,CAAAC,cAAA,GAAAlE,EAAA,CAAAgE,iBAAA,CAAAG,EAAA,CAAAC,MAAA;IAAA;EAAA;;;YAAnB/B,mBAAmB;MAAAgC,SAAA;MAAAC,KAAA;MAAAC,IAAA;MAAAC,MAAA;MAAAC,QAAA,WAAAC,6BAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;UCThC3E,EAAA,CAAAC,cAAA,aAA4B;UAEID,EAAA,CAAAG,MAAA,kBAAW;UAAAH,EAAA,CAAAI,YAAA,EAAK;UAG9CJ,EAAA,CAAA6B,UAAA,IAAAgD,kCAAA,iBAGM;UAGN7E,EAAA,CAAA6B,UAAA,IAAAiD,kCAAA,iBA2CM;UACR9E,EAAA,CAAAI,YAAA,EAAM;;;UAlDEJ,EAAA,CAAAkB,SAAA,GAA2B;UAA3BlB,EAAA,CAAAgC,UAAA,SAAA4C,GAAA,CAAAxC,QAAA,CAAA2C,MAAA,OAA2B;UAMX/E,EAAA,CAAAkB,SAAA,GAAyB;UAAzBlB,EAAA,CAAAgC,UAAA,SAAA4C,GAAA,CAAAxC,QAAA,CAAA2C,MAAA,KAAyB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}