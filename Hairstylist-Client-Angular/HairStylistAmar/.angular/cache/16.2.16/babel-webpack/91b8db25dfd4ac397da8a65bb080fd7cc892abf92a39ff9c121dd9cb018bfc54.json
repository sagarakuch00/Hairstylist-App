{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../../services/bookings/booking-manage.service\";\nimport * as i3 from \"../../../services/payments/payment-order.service\";\nimport * as i4 from \"../../../services/payments/payment-verify.service\";\nimport * as i5 from \"@angular/common\";\nfunction PaymentComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 2)(1, \"h2\", 3);\n    i0.ÉµÉµtext(2, \"\\uD83D\\uDCB3 Complete Payment\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(3, \"div\", 4)(4, \"div\", 5)(5, \"h3\");\n    i0.ÉµÉµtext(6);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(7, \"span\", 6);\n    i0.ÉµÉµtext(8);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(9, \"div\", 7)(10, \"div\", 8)(11, \"span\");\n    i0.ÉµÉµtext(12, \"Instructor\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(13, \"strong\");\n    i0.ÉµÉµtext(14);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(15, \"div\", 8)(16, \"span\");\n    i0.ÉµÉµtext(17, \"Start Date\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(18, \"strong\");\n    i0.ÉµÉµtext(19);\n    i0.ÉµÉµpipe(20, \"date\");\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(21, \"div\", 9)(22, \"span\");\n    i0.ÉµÉµtext(23, \"Total Amount\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(24, \"strong\");\n    i0.ÉµÉµtext(25);\n    i0.ÉµÉµelementEnd()()()();\n    i0.ÉµÉµelementStart(26, \"button\", 10);\n    i0.ÉµÉµtext(27);\n    i0.ÉµÉµelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(6);\n    i0.ÉµÉµtextInterpolate(ctx_r0.booking.batchName);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(ctx_r0.booking.status);\n    i0.ÉµÉµadvance(6);\n    i0.ÉµÉµtextInterpolate(ctx_r0.booking.instructorName);\n    i0.ÉµÉµadvance(5);\n    i0.ÉµÉµtextInterpolate(i0.ÉµÉµpipeBind1(20, 6, ctx_r0.booking.startDate));\n    i0.ÉµÉµadvance(6);\n    i0.ÉµÉµtextInterpolate1(\"\\u20B9\", ctx_r0.booking.amount, \"\");\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate1(\" Pay \\u20B9\", ctx_r0.booking.amount, \" \");\n  }\n}\nfunction PaymentComponent_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"p\", 11);\n    i0.ÉµÉµtext(1, \" Loading payment details...\\n\");\n    i0.ÉµÉµelementEnd();\n  }\n}\nexport class PaymentComponent {\n  constructor(route, router, bookingApi, orderApi, verifyApi) {\n    this.route = route;\n    this.router = router;\n    this.bookingApi = bookingApi;\n    this.orderApi = orderApi;\n    this.verifyApi = verifyApi;\n    this.loading = true;\n    this.processing = false;\n  }\n  ngOnInit() {\n    this.bookingId = this.route.snapshot.paramMap.get('bookingId');\n    if (!this.bookingId) {\n      alert('Invalid booking');\n      return;\n    }\n    this.loadBookingDetails();\n  }\n  // ðŸ”¹ Load booking details\n  loadBookingDetails() {\n    this.bookingApi.getBookingById(this.bookingId).subscribe({\n      next: res => {\n        this.booking = res;\n        this.loading = false;\n      },\n      error: err => {\n        console.error('Booking details error', err);\n        this.loading = false;\n        alert('Unable to load booking details');\n      }\n    });\n  }\n  // ðŸ”¹ Initiate payment\n  payNow() {\n    if (!this.booking || !this.booking.amount) {\n      alert('Invalid booking amount');\n      return;\n    }\n    if (this.processing) return;\n    this.processing = true;\n    this.orderApi.createOrder({\n      bookingId: this.bookingId,\n      amount: this.booking.amount\n    }).subscribe({\n      next: order => this.openRazorpay(order),\n      error: err => {\n        console.error('Create order failed', err);\n        this.processing = false;\n        alert('Payment initialization failed');\n      }\n    });\n  }\n  // ðŸ”¹ Open Razorpay popup\n  openRazorpay(order) {\n    const options = {\n      key: order.key,\n      amount: order.amount,\n      currency: order.currency,\n      name: 'Hairvona',\n      description: 'Batch Booking Payment',\n      order_id: order.orderId,\n      prefill: {\n        name: this.booking?.userName || '',\n        email: this.booking?.userEmail || '',\n        contact: this.booking?.mobile || ''\n      },\n      theme: {\n        color: '#8b5cf6'\n      },\n      handler: response => {\n        this.verifyPayment(response);\n      },\n      modal: {\n        ondismiss: () => {\n          this.processing = false;\n        }\n      }\n    };\n    const rzp = new Razorpay(options);\n    rzp.open();\n  }\n  // ðŸ”¹ Verify payment\n  verifyPayment(response) {\n    this.verifyApi.verifyPayment({\n      bookingId: this.bookingId,\n      razorpayOrderId: response.razorpay_order_id,\n      razorpayPaymentId: response.razorpay_payment_id,\n      razorpaySignature: response.razorpay_signature\n    }).subscribe({\n      next: () => {\n        this.processing = false;\n        alert('Payment successful ðŸŽ‰');\n        this.router.navigate(['/user/bookings']);\n      },\n      error: err => {\n        console.error('Payment verification failed', err);\n        this.processing = false;\n        alert('Payment verification failed');\n      }\n    });\n  }\n  static {\n    this.Éµfac = function PaymentComponent_Factory(t) {\n      return new (t || PaymentComponent)(i0.ÉµÉµdirectiveInject(i1.ActivatedRoute), i0.ÉµÉµdirectiveInject(i1.Router), i0.ÉµÉµdirectiveInject(i2.BookingManageService), i0.ÉµÉµdirectiveInject(i3.PaymentOrderService), i0.ÉµÉµdirectiveInject(i4.PaymentVerifyService));\n    };\n  }\n  static {\n    this.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n      type: PaymentComponent,\n      selectors: [[\"app-payment\"]],\n      decls: 2,\n      vars: 2,\n      consts: [[\"class\", \"payment-page\", 4, \"ngIf\"], [\"class\", \"loading-text\", 4, \"ngIf\"], [1, \"payment-page\"], [1, \"page-title\"], [1, \"payment-card\"], [1, \"card-header\"], [1, \"status\", \"pending\"], [1, \"card-body\"], [1, \"info-row\"], [1, \"info-row\", \"total\"], [1, \"pay-btn\"], [1, \"loading-text\"]],\n      template: function PaymentComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ÉµÉµtemplate(0, PaymentComponent_div_0_Template, 28, 8, \"div\", 0);\n          i0.ÉµÉµtemplate(1, PaymentComponent_p_1_Template, 2, 0, \"p\", 1);\n        }\n        if (rf & 2) {\n          i0.ÉµÉµproperty(\"ngIf\", ctx.booking);\n          i0.ÉµÉµadvance(1);\n          i0.ÉµÉµproperty(\"ngIf\", !ctx.booking);\n        }\n      },\n      dependencies: [i5.NgIf, i5.DatePipe],\n      styles: [\"\\n\\n\\n\\n\\n.payment-page[_ngcontent-%COMP%] {\\n  max-width: 520px;\\n  margin: auto;\\n  padding: 40px 20px 60px;\\n}\\n\\n\\n\\n.page-title[_ngcontent-%COMP%] {\\n  text-align: center;\\n  font-size: 26px;\\n  font-weight: 700;\\n  color: #6f3cff;\\n  margin-bottom: 26px;\\n}\\n\\n\\n\\n\\n\\n\\n.payment-card[_ngcontent-%COMP%] {\\n  background: #ffffff;\\n  border-radius: 22px;\\n  box-shadow: 0 14px 40px rgba(80, 40, 140, 0.15);\\n  overflow: hidden;\\n}\\n\\n\\n\\n.card-header[_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #7b5cff, #b38cff);\\n  color: #fff;\\n  padding: 20px 22px;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n}\\n\\n.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n  font-size: 18px;\\n  font-weight: 600;\\n  margin: 0;\\n}\\n\\n\\n\\n.status[_ngcontent-%COMP%] {\\n  font-size: 12px;\\n  padding: 6px 14px;\\n  border-radius: 20px;\\n  font-weight: 600;\\n}\\n\\n.status.pending[_ngcontent-%COMP%] {\\n  background: rgba(255, 255, 255, 0.25);\\n}\\n\\n\\n\\n.card-body[_ngcontent-%COMP%] {\\n  padding: 22px;\\n}\\n\\n\\n\\n.info-row[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  margin-bottom: 14px;\\n  font-size: 14px;\\n  color: #444;\\n}\\n\\n.info-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%] {\\n  color: #2a1f45;\\n}\\n\\n\\n\\n.info-row.total[_ngcontent-%COMP%] {\\n  margin-top: 18px;\\n  padding-top: 16px;\\n  border-top: 1px dashed #ddd;\\n  font-size: 18px;\\n}\\n\\n.info-row.total[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%] {\\n  color: #6f3cff;\\n}\\n\\n\\n\\n\\n\\n\\n.pay-btn[_ngcontent-%COMP%] {\\n  width: 100%;\\n  margin-top: 26px;\\n  padding: 14px;\\n  font-size: 16px;\\n  font-weight: 600;\\n  border-radius: 28px;\\n  border: none;\\n  cursor: pointer;\\n  color: #fff;\\n  background: linear-gradient(135deg, #8b5cf6, #ec4899);\\n  transition: all 0.3s ease;\\n}\\n\\n.pay-btn[_ngcontent-%COMP%]:hover {\\n  transform: translateY(-2px);\\n  box-shadow: 0 14px 28px rgba(139, 92, 246, 0.45);\\n}\\n\\n\\n\\n.loading-text[_ngcontent-%COMP%] {\\n  text-align: center;\\n  margin-top: 40px;\\n  color: #777;\\n  font-size: 14px;\\n}\\n\\n\\n\\n\\n\\n\\n@media (max-width: 480px) {\\n\\n  .page-title[_ngcontent-%COMP%] {\\n    font-size: 22px;\\n  }\\n\\n  .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n    font-size: 16px;\\n  }\\n\\n  .info-row.total[_ngcontent-%COMP%] {\\n    font-size: 16px;\\n  }\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbW9kdWxlcy91c2VyL3BheW1lbnQvcGF5bWVudC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztrQ0FFa0M7O0FBRWxDO0VBQ0UsZ0JBQWdCO0VBQ2hCLFlBQVk7RUFDWix1QkFBdUI7QUFDekI7O0FBRUEsVUFBVTtBQUNWO0VBQ0Usa0JBQWtCO0VBQ2xCLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsY0FBYztFQUNkLG1CQUFtQjtBQUNyQjs7QUFFQTs7a0NBRWtDOztBQUVsQztFQUNFLG1CQUFtQjtFQUNuQixtQkFBbUI7RUFDbkIsK0NBQStDO0VBQy9DLGdCQUFnQjtBQUNsQjs7QUFFQSxXQUFXO0FBQ1g7RUFDRSxxREFBcUQ7RUFDckQsV0FBVztFQUNYLGtCQUFrQjtFQUNsQixhQUFhO0VBQ2IsOEJBQThCO0VBQzlCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsU0FBUztBQUNYOztBQUVBLFdBQVc7QUFDWDtFQUNFLGVBQWU7RUFDZixpQkFBaUI7RUFDakIsbUJBQW1CO0VBQ25CLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLHFDQUFxQztBQUN2Qzs7QUFFQSxTQUFTO0FBQ1Q7RUFDRSxhQUFhO0FBQ2Y7O0FBRUEsY0FBYztBQUNkO0VBQ0UsYUFBYTtFQUNiLDhCQUE4QjtFQUM5QixtQkFBbUI7RUFDbkIsZUFBZTtFQUNmLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGNBQWM7QUFDaEI7O0FBRUEsY0FBYztBQUNkO0VBQ0UsZ0JBQWdCO0VBQ2hCLGlCQUFpQjtFQUNqQiwyQkFBMkI7RUFDM0IsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGNBQWM7QUFDaEI7O0FBRUE7O2tDQUVrQzs7QUFFbEM7RUFDRSxXQUFXO0VBQ1gsZ0JBQWdCO0VBQ2hCLGFBQWE7RUFDYixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQixZQUFZO0VBQ1osZUFBZTtFQUNmLFdBQVc7RUFDWCxxREFBcUQ7RUFDckQseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0UsMkJBQTJCO0VBQzNCLGdEQUFnRDtBQUNsRDs7QUFFQSxpQkFBaUI7QUFDakI7RUFDRSxrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLFdBQVc7RUFDWCxlQUFlO0FBQ2pCOztBQUVBOztrQ0FFa0M7O0FBRWxDOztFQUVFO0lBQ0UsZUFBZTtFQUNqQjs7RUFFQTtJQUNFLGVBQWU7RUFDakI7O0VBRUE7SUFDRSxlQUFlO0VBQ2pCO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgIFBBWU1FTlQgUEFHRVxyXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG5cclxuLnBheW1lbnQtcGFnZSB7XHJcbiAgbWF4LXdpZHRoOiA1MjBweDtcclxuICBtYXJnaW46IGF1dG87XHJcbiAgcGFkZGluZzogNDBweCAyMHB4IDYwcHg7XHJcbn1cclxuXHJcbi8qIFRpdGxlICovXHJcbi5wYWdlLXRpdGxlIHtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgZm9udC1zaXplOiAyNnB4O1xyXG4gIGZvbnQtd2VpZ2h0OiA3MDA7XHJcbiAgY29sb3I6ICM2ZjNjZmY7XHJcbiAgbWFyZ2luLWJvdHRvbTogMjZweDtcclxufVxyXG5cclxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICBQQVlNRU5UIENBUkRcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuXHJcbi5wYXltZW50LWNhcmQge1xyXG4gIGJhY2tncm91bmQ6ICNmZmZmZmY7XHJcbiAgYm9yZGVyLXJhZGl1czogMjJweDtcclxuICBib3gtc2hhZG93OiAwIDE0cHggNDBweCByZ2JhKDgwLCA0MCwgMTQwLCAwLjE1KTtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG59XHJcblxyXG4vKiBIZWFkZXIgKi9cclxuLmNhcmQtaGVhZGVyIHtcclxuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjN2I1Y2ZmLCAjYjM4Y2ZmKTtcclxuICBjb2xvcjogI2ZmZjtcclxuICBwYWRkaW5nOiAyMHB4IDIycHg7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxufVxyXG5cclxuLmNhcmQtaGVhZGVyIGgzIHtcclxuICBmb250LXNpemU6IDE4cHg7XHJcbiAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICBtYXJnaW46IDA7XHJcbn1cclxuXHJcbi8qIFN0YXR1cyAqL1xyXG4uc3RhdHVzIHtcclxuICBmb250LXNpemU6IDEycHg7XHJcbiAgcGFkZGluZzogNnB4IDE0cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogMjBweDtcclxuICBmb250LXdlaWdodDogNjAwO1xyXG59XHJcblxyXG4uc3RhdHVzLnBlbmRpbmcge1xyXG4gIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yNSk7XHJcbn1cclxuXHJcbi8qIEJvZHkgKi9cclxuLmNhcmQtYm9keSB7XHJcbiAgcGFkZGluZzogMjJweDtcclxufVxyXG5cclxuLyogSW5mbyByb3dzICovXHJcbi5pbmZvLXJvdyB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgbWFyZ2luLWJvdHRvbTogMTRweDtcclxuICBmb250LXNpemU6IDE0cHg7XHJcbiAgY29sb3I6ICM0NDQ7XHJcbn1cclxuXHJcbi5pbmZvLXJvdyBzdHJvbmcge1xyXG4gIGNvbG9yOiAjMmExZjQ1O1xyXG59XHJcblxyXG4vKiBUb3RhbCByb3cgKi9cclxuLmluZm8tcm93LnRvdGFsIHtcclxuICBtYXJnaW4tdG9wOiAxOHB4O1xyXG4gIHBhZGRpbmctdG9wOiAxNnB4O1xyXG4gIGJvcmRlci10b3A6IDFweCBkYXNoZWQgI2RkZDtcclxuICBmb250LXNpemU6IDE4cHg7XHJcbn1cclxuXHJcbi5pbmZvLXJvdy50b3RhbCBzdHJvbmcge1xyXG4gIGNvbG9yOiAjNmYzY2ZmO1xyXG59XHJcblxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgIFBBWSBCVVRUT05cclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuXHJcbi5wYXktYnRuIHtcclxuICB3aWR0aDogMTAwJTtcclxuICBtYXJnaW4tdG9wOiAyNnB4O1xyXG4gIHBhZGRpbmc6IDE0cHg7XHJcbiAgZm9udC1zaXplOiAxNnB4O1xyXG4gIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgYm9yZGVyLXJhZGl1czogMjhweDtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIGNvbG9yOiAjZmZmO1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM4YjVjZjYsICNlYzQ4OTkpO1xyXG4gIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7XHJcbn1cclxuXHJcbi5wYXktYnRuOmhvdmVyIHtcclxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7XHJcbiAgYm94LXNoYWRvdzogMCAxNHB4IDI4cHggcmdiYSgxMzksIDkyLCAyNDYsIDAuNDUpO1xyXG59XHJcblxyXG4vKiBMb2FkaW5nIHRleHQgKi9cclxuLmxvYWRpbmctdGV4dCB7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIG1hcmdpbi10b3A6IDQwcHg7XHJcbiAgY29sb3I6ICM3Nzc7XHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG59XHJcblxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgIFJFU1BPTlNJVkVcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuXHJcbkBtZWRpYSAobWF4LXdpZHRoOiA0ODBweCkge1xyXG5cclxuICAucGFnZS10aXRsZSB7XHJcbiAgICBmb250LXNpemU6IDIycHg7XHJcbiAgfVxyXG5cclxuICAuY2FyZC1oZWFkZXIgaDMge1xyXG4gICAgZm9udC1zaXplOiAxNnB4O1xyXG4gIH1cclxuXHJcbiAgLmluZm8tcm93LnRvdGFsIHtcclxuICAgIGZvbnQtc2l6ZTogMTZweDtcclxuICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ÉµÉµelementStart","ÉµÉµtext","ÉµÉµelementEnd","ÉµÉµadvance","ÉµÉµtextInterpolate","ctx_r0","booking","batchName","status","instructorName","ÉµÉµpipeBind1","startDate","ÉµÉµtextInterpolate1","amount","PaymentComponent","constructor","route","router","bookingApi","orderApi","verifyApi","loading","processing","ngOnInit","bookingId","snapshot","paramMap","get","alert","loadBookingDetails","getBookingById","subscribe","next","res","error","err","console","payNow","createOrder","order","openRazorpay","options","key","currency","name","description","order_id","orderId","prefill","userName","email","userEmail","contact","mobile","theme","color","handler","response","verifyPayment","modal","ondismiss","rzp","Razorpay","open","razorpayOrderId","razorpay_order_id","razorpayPaymentId","razorpay_payment_id","razorpaySignature","razorpay_signature","navigate","ÉµÉµdirectiveInject","i1","ActivatedRoute","Router","i2","BookingManageService","i3","PaymentOrderService","i4","PaymentVerifyService","selectors","decls","vars","consts","template","PaymentComponent_Template","rf","ctx","ÉµÉµtemplate","PaymentComponent_div_0_Template","PaymentComponent_p_1_Template","ÉµÉµproperty"],"sources":["C:\\Users\\Sagar\\OneDrive\\Desktop\\Hairstylist Amar\\HairstylistAmar-Client-Angular\\HairStylistAmar\\src\\app\\modules\\user\\payment\\payment.component.ts","C:\\Users\\Sagar\\OneDrive\\Desktop\\Hairstylist Amar\\HairstylistAmar-Client-Angular\\HairStylistAmar\\src\\app\\modules\\user\\payment\\payment.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\n\nimport { BookingManageService } from '../../../services/bookings/booking-manage.service';\nimport { PaymentOrderService } from '../../../services/payments/payment-order.service';\nimport { PaymentVerifyService } from '../../../services/payments/payment-verify.service';\n\ndeclare var Razorpay: any;\n\n@Component({\n  selector: 'app-payment',\n  templateUrl: './payment.component.html',\n  styleUrls: ['./payment.component.css'],\n})\nexport class PaymentComponent implements OnInit {\n\n  bookingId!: string;\n  booking: any;\n  loading = true;\n  processing = false;\n\n  constructor(\n    private route: ActivatedRoute,\n    private router: Router,\n    private bookingApi: BookingManageService,\n    private orderApi: PaymentOrderService,\n    private verifyApi: PaymentVerifyService\n  ) {}\n\nngOnInit(): void {\n  this.bookingId = this.route.snapshot.paramMap.get('bookingId')!;\n\n  if (!this.bookingId) {\n    alert('Invalid booking');\n    return;\n  }\n\n\n\n  this.loadBookingDetails();\n}\n\n\n  // ðŸ”¹ Load booking details\n  loadBookingDetails(): void {\n    this.bookingApi.getBookingById(this.bookingId).subscribe({\n      next: (res) => {\n        this.booking = res;\n        this.loading = false;\n      },\n      error: (err) => {\n        console.error('Booking details error', err);\n        this.loading = false;\n        alert('Unable to load booking details');\n      }\n    });\n  }\n\n  // ðŸ”¹ Initiate payment\n  payNow(): void {\n\n    if (!this.booking || !this.booking.amount) {\n      alert('Invalid booking amount');\n      return;\n    }\n\n    if (this.processing) return;\n\n    this.processing = true;\n\n    this.orderApi.createOrder({\n      bookingId: this.bookingId,\n      amount: this.booking.amount\n    }).subscribe({\n      next: (order: any) => this.openRazorpay(order),\n      error: (err) => {\n        console.error('Create order failed', err);\n        this.processing = false;\n        alert('Payment initialization failed');\n      }\n    });\n  }\n\n  // ðŸ”¹ Open Razorpay popup\n  openRazorpay(order: any): void {\n\n    const options = {\n      key: order.key,\n      amount: order.amount,\n      currency: order.currency,\n      name: 'Hairvona',\n      description: 'Batch Booking Payment',\n      order_id: order.orderId,\n\n      prefill: {\n        name: this.booking?.userName || '',\n        email: this.booking?.userEmail || '',\n        contact: this.booking?.mobile || ''\n      },\n\n      theme: {\n        color: '#8b5cf6'\n      },\n\n      handler: (response: any) => {\n        this.verifyPayment(response);\n      },\n\n      modal: {\n        ondismiss: () => {\n          this.processing = false;\n        }\n      }\n    };\n\n    const rzp = new Razorpay(options);\n    rzp.open();\n  }\n\n  // ðŸ”¹ Verify payment\n  verifyPayment(response: any): void {\n\n    this.verifyApi.verifyPayment({\n      bookingId: this.bookingId,\n      razorpayOrderId: response.razorpay_order_id,\n      razorpayPaymentId: response.razorpay_payment_id,\n      razorpaySignature: response.razorpay_signature\n    }).subscribe({\n      next: () => {\n        this.processing = false;\n        alert('Payment successful ðŸŽ‰');\n        this.router.navigate(['/user/bookings']);\n      },\n      error: (err) => {\n        console.error('Payment verification failed', err);\n        this.processing = false;\n        alert('Payment verification failed');\n      }\n    });\n  }\n}\n","<div class=\"payment-page\" *ngIf=\"booking\">\n\n  <h2 class=\"page-title\">ðŸ’³ Complete Payment</h2>\n\n  <!-- Booking Summary -->\n  <div class=\"payment-card\">\n\n    <div class=\"card-header\">\n      <h3>{{ booking.batchName }}</h3>\n      <span class=\"status pending\">{{ booking.status }}</span>\n    </div>\n\n    <div class=\"card-body\">\n      <div class=\"info-row\">\n        <span>Instructor</span>\n        <strong>{{ booking.instructorName }}</strong>\n      </div>\n\n      <div class=\"info-row\">\n        <span>Start Date</span>\n        <strong>{{ booking.startDate | date }}</strong>\n      </div>\n\n      <div class=\"info-row total\">\n        <span>Total Amount</span>\n        <strong>â‚¹{{ booking.amount }}</strong>\n      </div>\n    </div>\n\n  </div>\n\n  <!-- Pay Button -->\n  <button class=\"pay-btn\">\n    Pay â‚¹{{ booking.amount }}\n  </button>\n\n</div>\n\n<!-- Loading -->\n<p *ngIf=\"!booking\" class=\"loading-text\">\n  Loading payment details...\n</p>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}