{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let MyBookingsComponent = class MyBookingsComponent {\n  constructor(bookingService, router) {\n    this.bookingService = bookingService;\n    this.router = router;\n    this.bookings = [];\n  }\n  ngOnInit() {\n    this.loadBookings();\n  }\n  loadBookings() {\n    const userId = localStorage.getItem(\"userId\");\n    if (!userId) {\n      alert(\"Please login again.\");\n      this.router.navigate(['/login']);\n      return;\n    }\n    this.bookingService.getBookingsByUser(userId).subscribe({\n      next: res => this.bookings = res,\n      error: err => console.error(err)\n    });\n  }\n  makePayment(booking) {\n    this.router.navigate(['/user/payment'], {\n      state: {\n        bookingId: booking.bookingId,\n        amount: booking.batch.price\n      }\n    });\n  }\n  cancelBooking(booking) {\n    if (!booking || !booking.bookingId) {\n      console.error('Invalid booking object', booking);\n      return;\n    }\n    const confirmed = confirm('Are you sure you want to cancel this booking?');\n    if (!confirmed) return;\n    this.bookingService.cancelBooking(booking.bookingId).subscribe({\n      next: () => {\n        booking.status = 'Cancelled'; // UI update\n      },\n\n      error: err => {\n        console.error(err);\n        alert(err.error?.message || 'Failed to cancel booking');\n      }\n    });\n  }\n};\nMyBookingsComponent = __decorate([Component({\n  selector: 'app-my-bookings',\n  templateUrl: './my-bookings.component.html',\n  styleUrls: ['./my-bookings.component.css']\n})], MyBookingsComponent);","map":{"version":3,"names":["Component","MyBookingsComponent","constructor","bookingService","router","bookings","ngOnInit","loadBookings","userId","localStorage","getItem","alert","navigate","getBookingsByUser","subscribe","next","res","error","err","console","makePayment","booking","state","bookingId","amount","batch","price","cancelBooking","confirmed","confirm","status","message","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\Sagar\\OneDrive\\Desktop\\Hairstylist Amar\\HairstylistAmar-Client-Angular\\HairStylistAmar\\src\\app\\user\\my-bookings\\my-bookings.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { BookingService } from '../../services/booking.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-my-bookings',\n  templateUrl: './my-bookings.component.html',\n  styleUrls: ['./my-bookings.component.css']\n})\nexport class MyBookingsComponent implements OnInit {\n\n  bookings: any[] = [];\n\n\n  constructor(\n    private bookingService: BookingService,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n    this.loadBookings();\n  }\n\n  loadBookings() {\n    const userId = localStorage.getItem(\"userId\");\n\n    if (!userId) {\n      alert(\"Please login again.\");\n      this.router.navigate(['/login']);\n      return;\n    }\n\n    this.bookingService.getBookingsByUser(userId).subscribe({\n      next: (res: any) => this.bookings = res,\n      error: (err) => console.error(err)\n    });\n  }\n\n  makePayment(booking: any) {\n    this.router.navigate(['/user/payment'], {\n      state: {\n        bookingId: booking.bookingId,\n        amount: booking.batch.price\n      }\n    });\n  }\n\n  cancelBooking(booking: any) {\n    if (!booking || !booking.bookingId) {\n      console.error('Invalid booking object', booking);\n      return;\n    }\n\n    const confirmed = confirm('Are you sure you want to cancel this booking?');\n    if (!confirmed) return;\n\n    this.bookingService.cancelBooking(booking.bookingId).subscribe({\n      next: () => {\n        booking.status = 'Cancelled'; // UI update\n      },\n      error: (err: { error: { message: any; }; }) => {\n        console.error(err);\n        alert(err.error?.message || 'Failed to cancel booking');\n      }\n    });\n  }\n\n\n\n\n\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAS1C,WAAMC,mBAAmB,GAAzB,MAAMA,mBAAmB;EAK9BC,YACUC,cAA8B,EAC9BC,MAAc;IADd,KAAAD,cAAc,GAAdA,cAAc;IACd,KAAAC,MAAM,GAANA,MAAM;IALhB,KAAAC,QAAQ,GAAU,EAAE;EAMjB;EAEHC,QAAQA,CAAA;IACN,IAAI,CAACC,YAAY,EAAE;EACrB;EAEAA,YAAYA,CAAA;IACV,MAAMC,MAAM,GAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;IAE7C,IAAI,CAACF,MAAM,EAAE;MACXG,KAAK,CAAC,qBAAqB,CAAC;MAC5B,IAAI,CAACP,MAAM,CAACQ,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;MAChC;;IAGF,IAAI,CAACT,cAAc,CAACU,iBAAiB,CAACL,MAAM,CAAC,CAACM,SAAS,CAAC;MACtDC,IAAI,EAAGC,GAAQ,IAAK,IAAI,CAACX,QAAQ,GAAGW,GAAG;MACvCC,KAAK,EAAGC,GAAG,IAAKC,OAAO,CAACF,KAAK,CAACC,GAAG;KAClC,CAAC;EACJ;EAEAE,WAAWA,CAACC,OAAY;IACtB,IAAI,CAACjB,MAAM,CAACQ,QAAQ,CAAC,CAAC,eAAe,CAAC,EAAE;MACtCU,KAAK,EAAE;QACLC,SAAS,EAAEF,OAAO,CAACE,SAAS;QAC5BC,MAAM,EAAEH,OAAO,CAACI,KAAK,CAACC;;KAEzB,CAAC;EACJ;EAEAC,aAAaA,CAACN,OAAY;IACxB,IAAI,CAACA,OAAO,IAAI,CAACA,OAAO,CAACE,SAAS,EAAE;MAClCJ,OAAO,CAACF,KAAK,CAAC,wBAAwB,EAAEI,OAAO,CAAC;MAChD;;IAGF,MAAMO,SAAS,GAAGC,OAAO,CAAC,+CAA+C,CAAC;IAC1E,IAAI,CAACD,SAAS,EAAE;IAEhB,IAAI,CAACzB,cAAc,CAACwB,aAAa,CAACN,OAAO,CAACE,SAAS,CAAC,CAACT,SAAS,CAAC;MAC7DC,IAAI,EAAEA,CAAA,KAAK;QACTM,OAAO,CAACS,MAAM,GAAG,WAAW,CAAC,CAAC;MAChC,CAAC;;MACDb,KAAK,EAAGC,GAAkC,IAAI;QAC5CC,OAAO,CAACF,KAAK,CAACC,GAAG,CAAC;QAClBP,KAAK,CAACO,GAAG,CAACD,KAAK,EAAEc,OAAO,IAAI,0BAA0B,CAAC;MACzD;KACD,CAAC;EACJ;CAMD;AA9DY9B,mBAAmB,GAAA+B,UAAA,EAL/BhC,SAAS,CAAC;EACTiC,QAAQ,EAAE,iBAAiB;EAC3BC,WAAW,EAAE,8BAA8B;EAC3CC,SAAS,EAAE,CAAC,6BAA6B;CAC1C,CAAC,C,EACWlC,mBAAmB,CA8D/B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}