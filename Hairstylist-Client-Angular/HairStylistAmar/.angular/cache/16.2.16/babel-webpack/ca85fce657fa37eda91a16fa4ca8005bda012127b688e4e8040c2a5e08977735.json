{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/batches/batch-manage.service\";\nimport * as i2 from \"src/app/services/services/service-query.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction CreateBatchComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 7)(2, \"h3\");\n    i0.ɵɵtext(3, \"\\u2705 Batch Created\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5, \"Your batch has been created successfully.\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction CreateBatchComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 8)(2, \"h3\");\n    i0.ɵɵtext(3, \"\\u274C Error\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function CreateBatchComponent_div_8_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.closeErrorPopup());\n    });\n    i0.ɵɵtext(7, \" Close \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r2.errorMessage);\n  }\n}\nexport class CreateBatchComponent {\n  constructor(batchManageService, serviceQueryService, router) {\n    this.batchManageService = batchManageService;\n    this.serviceQueryService = serviceQueryService;\n    this.router = router;\n    this.batchId = null;\n    this.batchName = '';\n    this.description = '';\n    this.price = 0;\n    this.startDate = '';\n    this.serviceId = '';\n    this.totalSeats = 0;\n    this.mobileNumber = '';\n    this.minStartDate = '';\n    this.services = [];\n    this.isSubmitting = false;\n    // ✅ POPUP STATES\n    this.showSuccessPopup = false;\n    this.showErrorPopup = false;\n    this.errorMessage = 'Batch creation failed. Please try again.';\n  }\n  ngOnInit() {\n    this.setMinStartDate();\n    this.fetchServices();\n  }\n  setMinStartDate() {\n    const today = new Date();\n    this.minStartDate = today.toISOString().split('T')[0];\n  }\n  fetchServices() {\n    this.serviceQueryService.getAllServices().subscribe({\n      next: services => {\n        this.services = services;\n      },\n      error: () => {\n        this.showErrorPopup = true;\n        this.errorMessage = 'Unable to load services.';\n      }\n    });\n  }\n  submitBatch() {\n    if (this.isSubmitting) return;\n    const payload = {\n      batchName: this.batchName,\n      description: this.description,\n      price: this.price,\n      totalSeats: this.totalSeats,\n      availableSeats: this.totalSeats,\n      startDate: this.startDate,\n      serviceId: this.serviceId,\n      mobileNumber: this.mobileNumber\n    };\n    this.isSubmitting = true;\n    this.batchManageService.createBatch(payload).subscribe({\n      next: () => {\n        this.isSubmitting = false;\n        this.showSuccessPopup = true;\n        setTimeout(() => {\n          this.showSuccessPopup = false;\n          this.router.navigate(['/instructor/batches']);\n        }, 1800);\n      },\n      error: error => {\n        console.error('Batch creation failed', error);\n        this.isSubmitting = false;\n        this.showErrorPopup = true;\n        this.errorMessage = error?.error || 'Batch creation failed. Please try again.';\n      }\n    });\n  }\n  closeErrorPopup() {\n    this.showErrorPopup = false;\n  }\n  static {\n    this.ɵfac = function CreateBatchComponent_Factory(t) {\n      return new (t || CreateBatchComponent)(i0.ɵɵdirectiveInject(i1.BatchManageService), i0.ɵɵdirectiveInject(i2.ServiceQueryService), i0.ɵɵdirectiveInject(i3.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CreateBatchComponent,\n      selectors: [[\"app-create-batch\"]],\n      decls: 9,\n      vars: 5,\n      consts: [[1, \"batch-container\"], [1, \"page-title\"], [1, \"batch-form\", 3, \"ngSubmit\"], [\"batchForm\", \"ngForm\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary-custom\", 3, \"disabled\"], [\"class\", \"popup-overlay\", 4, \"ngIf\"], [1, \"popup-overlay\"], [1, \"popup\", \"success\"], [1, \"popup\", \"error\"], [1, \"btn\", \"btn-outline\", 3, \"click\"]],\n      template: function CreateBatchComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\", 1);\n          i0.ɵɵtext(2);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"form\", 2, 3);\n          i0.ɵɵlistener(\"ngSubmit\", function CreateBatchComponent_Template_form_ngSubmit_3_listener() {\n            return ctx.submitBatch();\n          });\n          i0.ɵɵelementStart(5, \"button\", 4);\n          i0.ɵɵtext(6);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(7, CreateBatchComponent_div_7_Template, 6, 0, \"div\", 5);\n          i0.ɵɵtemplate(8, CreateBatchComponent_div_8_Template, 8, 1, \"div\", 5);\n        }\n        if (rf & 2) {\n          const _r0 = i0.ɵɵreference(4);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\" \", ctx.batchId ? \"Edit Batch\" : \"Create New Batch\", \" \");\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"disabled\", _r0.invalid || ctx.isSubmitting);\n          i0.ɵɵadvance(1);\n          i0.ɵɵtextInterpolate1(\" \", ctx.batchId ? \"Update Batch\" : \"Create Batch\", \" \");\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.showSuccessPopup);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.showErrorPopup);\n        }\n      },\n      dependencies: [i4.NgIf, i5.ɵNgNoValidate, i5.NgControlStatusGroup, i5.NgForm],\n      styles: [\"\\n\\n\\n\\n.batch-container[_ngcontent-%COMP%] {\\n  width: 100%;\\n  margin: 40px auto;\\n  padding: 0 24px;\\n}\\n\\n\\n\\n\\n\\n.page-title[_ngcontent-%COMP%] {\\n  font-size: 24px;\\n  font-weight: 600;\\n  color: var(--primary-purple);\\n  margin-bottom: 24px;\\n  text-align: left;\\n}\\n\\n\\n\\n\\n\\n.batch-form[_ngcontent-%COMP%] {\\n  background: var(--bg-soft);\\n  padding: 28px;\\n  border-radius: 16px;\\n  box-shadow: var(--shadow-soft);\\n\\n  display: flex;\\n  flex-direction: column;\\n  gap: 20px;\\n}\\n\\n\\n\\n\\n\\n.form-group[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\\n  font-size: 13.5px;\\n  margin-bottom: 6px;\\n  color: var(--text-dark);\\n  font-weight: 500;\\n}\\n\\n\\n\\n\\n\\n.form-control[_ngcontent-%COMP%] {\\n  border-radius: 10px;\\n  padding: 12px 14px; \\n\\n  font-size: 14px;\\n  border: 1px solid #ddd;\\n  transition: all 0.25s ease;\\n}\\n\\n.form-control[_ngcontent-%COMP%]:focus {\\n  outline: none;\\n  border-color: var(--primary-purple);\\n  box-shadow: 0 0 0 2px rgba(106, 77, 244, 0.15);\\n}\\n\\n\\n\\n\\n\\n.btn-primary-custom[_ngcontent-%COMP%] {\\n  margin-top: 12px;\\n  align-self: center;\\n\\n  background: var(--gradient-primary);\\n  color: #fff;\\n  border: none;\\n  border-radius: 24px;\\n  padding: 12px 34px;\\n\\n  font-size: 15px;\\n  font-weight: 500;\\n  cursor: pointer;\\n  transition: transform 0.2s ease, opacity 0.2s ease;\\n}\\n\\n.btn-primary-custom[_ngcontent-%COMP%]:hover {\\n  transform: translateY(-2px);\\n  opacity: 0.92;\\n}\\n\\n.btn-primary-custom[_ngcontent-%COMP%]:disabled {\\n  opacity: 0.6;\\n  cursor: not-allowed;\\n}\\n\\n\\n\\n\\n\\n@media (min-width: 1024px) {\\n  .batch-container[_ngcontent-%COMP%] {\\n    max-width: 1100px;   \\n\\n    padding: 0 32px;\\n  } \\n}\\n\\n\\n\\n\\n\\n@media (max-width: 640px) {\\n\\n  .batch-container[_ngcontent-%COMP%] {\\n    margin: 24px auto;\\n    max-width: 100%;\\n    padding: 0 14px;\\n  }\\n\\n  .page-title[_ngcontent-%COMP%] {\\n    text-align: center;\\n    font-size: 22px;\\n  }\\n\\n  .batch-form[_ngcontent-%COMP%] {\\n    padding: 20px;\\n  }\\n\\n  .btn-primary-custom[_ngcontent-%COMP%] {\\n    width: 100%;        \\n\\n    border-radius: 12px;\\n  }\\n}\\n\\n\\n\\n\\n\\n.form-row[_ngcontent-%COMP%] {\\n  display: grid;\\n  grid-template-columns: 1fr 1fr;\\n  gap: 16px;\\n}\\n\\n\\n\\n\\n\\n.input-icon[_ngcontent-%COMP%] {\\n  position: relative;\\n}\\n\\n.input-icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%] {\\n  position: absolute;\\n  left: 12px;\\n  top: 50%;\\n  transform: translateY(-50%);\\n  font-size: 14px;\\n  color: var(--primary-purple);\\n}\\n\\n.input-icon[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%] {\\n  padding-left: 36px;\\n}\\n\\n\\n\\n\\n\\n.toast-success[_ngcontent-%COMP%] {\\n  position: fixed;\\n  top: 20px;\\n  right: 20px;\\n  background: var(--gradient-primary);\\n  color: #fff;\\n  padding: 12px 18px;\\n  border-radius: 12px;\\n  font-size: 14px;\\n  box-shadow: var(--shadow-soft);\\n  z-index: 9999;\\n  animation: _ngcontent-%COMP%_slideIn 0.3s ease;\\n}\\n\\n@keyframes _ngcontent-%COMP%_slideIn {\\n  from {\\n    transform: translateY(-10px);\\n    opacity: 0;\\n  }\\n  to {\\n    transform: translateY(0);\\n    opacity: 1;\\n  }\\n}\\n\\n\\n\\n\\n\\n@media (max-width: 640px) {\\n  .form-row[_ngcontent-%COMP%] {\\n    grid-template-columns: 1fr; \\n\\n  }\\n\\n  .toast-success[_ngcontent-%COMP%] {\\n    left: 50%;\\n    right: auto;\\n    transform: translateX(-50%);\\n  }\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbW9kdWxlcy9pbnN0cnVjdG9yL2NyZWF0ZS1iYXRjaC9jcmVhdGUtYmF0Y2guY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7a0NBRWtDO0FBQ2xDO0VBQ0UsV0FBVztFQUNYLGlCQUFpQjtFQUNqQixlQUFlO0FBQ2pCOztBQUVBOztrQ0FFa0M7QUFDbEM7RUFDRSxlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLDRCQUE0QjtFQUM1QixtQkFBbUI7RUFDbkIsZ0JBQWdCO0FBQ2xCOztBQUVBOztrQ0FFa0M7QUFDbEM7RUFDRSwwQkFBMEI7RUFDMUIsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQiw4QkFBOEI7O0VBRTlCLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsU0FBUztBQUNYOztBQUVBOztrQ0FFa0M7QUFDbEM7RUFDRSxhQUFhO0VBQ2Isc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsaUJBQWlCO0VBQ2pCLGtCQUFrQjtFQUNsQix1QkFBdUI7RUFDdkIsZ0JBQWdCO0FBQ2xCOztBQUVBOztrQ0FFa0M7QUFDbEM7RUFDRSxtQkFBbUI7RUFDbkIsa0JBQWtCLEVBQUUsMEJBQTBCO0VBQzlDLGVBQWU7RUFDZixzQkFBc0I7RUFDdEIsMEJBQTBCO0FBQzVCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLG1DQUFtQztFQUNuQyw4Q0FBOEM7QUFDaEQ7O0FBRUE7O2tDQUVrQztBQUNsQztFQUNFLGdCQUFnQjtFQUNoQixrQkFBa0I7O0VBRWxCLG1DQUFtQztFQUNuQyxXQUFXO0VBQ1gsWUFBWTtFQUNaLG1CQUFtQjtFQUNuQixrQkFBa0I7O0VBRWxCLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsZUFBZTtFQUNmLGtEQUFrRDtBQUNwRDs7QUFFQTtFQUNFLDJCQUEyQjtFQUMzQixhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxZQUFZO0VBQ1osbUJBQW1CO0FBQ3JCOztBQUVBOztrQ0FFa0M7QUFDbEM7RUFDRTtJQUNFLGlCQUFpQixJQUFJLCtCQUErQjtJQUNwRCxlQUFlO0VBQ2pCO0FBQ0Y7O0FBRUE7O2tDQUVrQztBQUNsQzs7RUFFRTtJQUNFLGlCQUFpQjtJQUNqQixlQUFlO0lBQ2YsZUFBZTtFQUNqQjs7RUFFQTtJQUNFLGtCQUFrQjtJQUNsQixlQUFlO0VBQ2pCOztFQUVBO0lBQ0UsYUFBYTtFQUNmOztFQUVBO0lBQ0UsV0FBVyxTQUFTLGtDQUFrQztJQUN0RCxtQkFBbUI7RUFDckI7QUFDRjs7QUFFQTs7a0NBRWtDO0FBQ2xDO0VBQ0UsYUFBYTtFQUNiLDhCQUE4QjtFQUM5QixTQUFTO0FBQ1g7O0FBRUE7O2tDQUVrQztBQUNsQztFQUNFLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixVQUFVO0VBQ1YsUUFBUTtFQUNSLDJCQUEyQjtFQUMzQixlQUFlO0VBQ2YsNEJBQTRCO0FBQzlCOztBQUVBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBOztrQ0FFa0M7QUFDbEM7RUFDRSxlQUFlO0VBQ2YsU0FBUztFQUNULFdBQVc7RUFDWCxtQ0FBbUM7RUFDbkMsV0FBVztFQUNYLGtCQUFrQjtFQUNsQixtQkFBbUI7RUFDbkIsZUFBZTtFQUNmLDhCQUE4QjtFQUM5QixhQUFhO0VBQ2IsNEJBQTRCO0FBQzlCOztBQUVBO0VBQ0U7SUFDRSw0QkFBNEI7SUFDNUIsVUFBVTtFQUNaO0VBQ0E7SUFDRSx3QkFBd0I7SUFDeEIsVUFBVTtFQUNaO0FBQ0Y7O0FBRUE7O2tDQUVrQztBQUNsQztFQUNFO0lBQ0UsMEJBQTBCLEVBQUUsb0JBQW9CO0VBQ2xEOztFQUVBO0lBQ0UsU0FBUztJQUNULFdBQVc7SUFDWCwyQkFBMkI7RUFDN0I7QUFDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgIENPTlRBSU5FUlxyXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG4uYmF0Y2gtY29udGFpbmVyIHtcclxuICB3aWR0aDogMTAwJTtcclxuICBtYXJnaW46IDQwcHggYXV0bztcclxuICBwYWRkaW5nOiAwIDI0cHg7XHJcbn1cclxuXHJcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgIFBBR0UgVElUTEVcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuLnBhZ2UtdGl0bGUge1xyXG4gIGZvbnQtc2l6ZTogMjRweDtcclxuICBmb250LXdlaWdodDogNjAwO1xyXG4gIGNvbG9yOiB2YXIoLS1wcmltYXJ5LXB1cnBsZSk7XHJcbiAgbWFyZ2luLWJvdHRvbTogMjRweDtcclxuICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG59XHJcblxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICBGT1JNIENBUkRcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuLmJhdGNoLWZvcm0ge1xyXG4gIGJhY2tncm91bmQ6IHZhcigtLWJnLXNvZnQpO1xyXG4gIHBhZGRpbmc6IDI4cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogMTZweDtcclxuICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3ctc29mdCk7XHJcblxyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICBnYXA6IDIwcHg7XHJcbn1cclxuXHJcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgIEZPUk0gR1JPVVBcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuLmZvcm0tZ3JvdXAge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxufVxyXG5cclxuLmZvcm0tZ3JvdXAgbGFiZWwge1xyXG4gIGZvbnQtc2l6ZTogMTMuNXB4O1xyXG4gIG1hcmdpbi1ib3R0b206IDZweDtcclxuICBjb2xvcjogdmFyKC0tdGV4dC1kYXJrKTtcclxuICBmb250LXdlaWdodDogNTAwO1xyXG59XHJcblxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICBJTlBVVFNcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuLmZvcm0tY29udHJvbCB7XHJcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcclxuICBwYWRkaW5nOiAxMnB4IDE0cHg7IC8qIMOiwpzChSBiZXR0ZXIgdG91Y2ggdGFyZ2V0ICovXHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XHJcbiAgdHJhbnNpdGlvbjogYWxsIDAuMjVzIGVhc2U7XHJcbn1cclxuXHJcbi5mb3JtLWNvbnRyb2w6Zm9jdXMge1xyXG4gIG91dGxpbmU6IG5vbmU7XHJcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1wcmltYXJ5LXB1cnBsZSk7XHJcbiAgYm94LXNoYWRvdzogMCAwIDAgMnB4IHJnYmEoMTA2LCA3NywgMjQ0LCAwLjE1KTtcclxufVxyXG5cclxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgQlVUVE9OXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcbi5idG4tcHJpbWFyeS1jdXN0b20ge1xyXG4gIG1hcmdpbi10b3A6IDEycHg7XHJcbiAgYWxpZ24tc2VsZjogY2VudGVyO1xyXG5cclxuICBiYWNrZ3JvdW5kOiB2YXIoLS1ncmFkaWVudC1wcmltYXJ5KTtcclxuICBjb2xvcjogI2ZmZjtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgYm9yZGVyLXJhZGl1czogMjRweDtcclxuICBwYWRkaW5nOiAxMnB4IDM0cHg7XHJcblxyXG4gIGZvbnQtc2l6ZTogMTVweDtcclxuICBmb250LXdlaWdodDogNTAwO1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxuICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4ycyBlYXNlLCBvcGFjaXR5IDAuMnMgZWFzZTtcclxufVxyXG5cclxuLmJ0bi1wcmltYXJ5LWN1c3RvbTpob3ZlciB7XHJcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpO1xyXG4gIG9wYWNpdHk6IDAuOTI7XHJcbn1cclxuXHJcbi5idG4tcHJpbWFyeS1jdXN0b206ZGlzYWJsZWQge1xyXG4gIG9wYWNpdHk6IDAuNjtcclxuICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xyXG59XHJcblxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICBUQUJMRVQgVklFV1xyXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG5AbWVkaWEgKG1pbi13aWR0aDogMTAyNHB4KSB7XHJcbiAgLmJhdGNoLWNvbnRhaW5lciB7XHJcbiAgICBtYXgtd2lkdGg6IDExMDBweDsgICAvKiDDosKcwoUgdGFrZXMgbGVmdCArIHJpZ2h0IHNwYWNlICovXHJcbiAgICBwYWRkaW5nOiAwIDMycHg7XHJcbiAgfSBcclxufVxyXG5cclxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgTU9CSUxFIFZJRVdcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuQG1lZGlhIChtYXgtd2lkdGg6IDY0MHB4KSB7XHJcblxyXG4gIC5iYXRjaC1jb250YWluZXIge1xyXG4gICAgbWFyZ2luOiAyNHB4IGF1dG87XHJcbiAgICBtYXgtd2lkdGg6IDEwMCU7XHJcbiAgICBwYWRkaW5nOiAwIDE0cHg7XHJcbiAgfVxyXG5cclxuICAucGFnZS10aXRsZSB7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBmb250LXNpemU6IDIycHg7XHJcbiAgfVxyXG5cclxuICAuYmF0Y2gtZm9ybSB7XHJcbiAgICBwYWRkaW5nOiAyMHB4O1xyXG4gIH1cclxuXHJcbiAgLmJ0bi1wcmltYXJ5LWN1c3RvbSB7XHJcbiAgICB3aWR0aDogMTAwJTsgICAgICAgIC8qIMOiwpzChSBmdWxsLXdpZHRoIGJ1dHRvbiBvbiBtb2JpbGUgKi9cclxuICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XHJcbiAgfVxyXG59XHJcblxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICBGT1JNIFJPVyAoMi1jb2x1bW4pXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcbi5mb3JtLXJvdyB7XHJcbiAgZGlzcGxheTogZ3JpZDtcclxuICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7XHJcbiAgZ2FwOiAxNnB4O1xyXG59XHJcblxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICBJTlBVVCBXSVRIIElDT05cclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuLmlucHV0LWljb24ge1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxufVxyXG5cclxuLmlucHV0LWljb24gLmljb24ge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICBsZWZ0OiAxMnB4O1xyXG4gIHRvcDogNTAlO1xyXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcclxuICBmb250LXNpemU6IDE0cHg7XHJcbiAgY29sb3I6IHZhcigtLXByaW1hcnktcHVycGxlKTtcclxufVxyXG5cclxuLmlucHV0LWljb24gLmZvcm0tY29udHJvbCB7XHJcbiAgcGFkZGluZy1sZWZ0OiAzNnB4O1xyXG59XHJcblxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICBTVUNDRVNTIFRPQVNUXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcbi50b2FzdC1zdWNjZXNzIHtcclxuICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgdG9wOiAyMHB4O1xyXG4gIHJpZ2h0OiAyMHB4O1xyXG4gIGJhY2tncm91bmQ6IHZhcigtLWdyYWRpZW50LXByaW1hcnkpO1xyXG4gIGNvbG9yOiAjZmZmO1xyXG4gIHBhZGRpbmc6IDEycHggMThweDtcclxuICBib3JkZXItcmFkaXVzOiAxMnB4O1xyXG4gIGZvbnQtc2l6ZTogMTRweDtcclxuICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3ctc29mdCk7XHJcbiAgei1pbmRleDogOTk5OTtcclxuICBhbmltYXRpb246IHNsaWRlSW4gMC4zcyBlYXNlO1xyXG59XHJcblxyXG5Aa2V5ZnJhbWVzIHNsaWRlSW4ge1xyXG4gIGZyb20ge1xyXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMHB4KTtcclxuICAgIG9wYWNpdHk6IDA7XHJcbiAgfVxyXG4gIHRvIHtcclxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTtcclxuICAgIG9wYWNpdHk6IDE7XHJcbiAgfVxyXG59XHJcblxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICBNT0JJTEUgRklYRVNcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuQG1lZGlhIChtYXgtd2lkdGg6IDY0MHB4KSB7XHJcbiAgLmZvcm0tcm93IHtcclxuICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyOyAvKiBzdGFjayBvbiBtb2JpbGUgKi9cclxuICB9XHJcblxyXG4gIC50b2FzdC1zdWNjZXNzIHtcclxuICAgIGxlZnQ6IDUwJTtcclxuICAgIHJpZ2h0OiBhdXRvO1xyXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpO1xyXG4gIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","CreateBatchComponent_div_8_Template_button_click_6_listener","ɵɵrestoreView","_r4","ctx_r3","ɵɵnextContext","ɵɵresetView","closeErrorPopup","ɵɵadvance","ɵɵtextInterpolate","ctx_r2","errorMessage","CreateBatchComponent","constructor","batchManageService","serviceQueryService","router","batchId","batchName","description","price","startDate","serviceId","totalSeats","mobileNumber","minStartDate","services","isSubmitting","showSuccessPopup","showErrorPopup","ngOnInit","setMinStartDate","fetchServices","today","Date","toISOString","split","getAllServices","subscribe","next","error","submitBatch","payload","availableSeats","createBatch","setTimeout","navigate","console","ɵɵdirectiveInject","i1","BatchManageService","i2","ServiceQueryService","i3","Router","selectors","decls","vars","consts","template","CreateBatchComponent_Template","rf","ctx","CreateBatchComponent_Template_form_ngSubmit_3_listener","ɵɵtemplate","CreateBatchComponent_div_7_Template","CreateBatchComponent_div_8_Template","ɵɵtextInterpolate1","ɵɵproperty","_r0","invalid"],"sources":["C:\\Users\\Sagar\\OneDrive\\Desktop\\Hairstylist Amar\\HairstylistAmar-Client-Angular\\HairStylistAmar\\src\\app\\modules\\instructor\\create-batch\\create-batch.component.ts","C:\\Users\\Sagar\\OneDrive\\Desktop\\Hairstylist Amar\\HairstylistAmar-Client-Angular\\HairStylistAmar\\src\\app\\modules\\instructor\\create-batch\\create-batch.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { BatchManageService } from 'src/app/services/batches/batch-manage.service';\nimport { ServiceQueryService } from 'src/app/services/services/service-query.service';\nimport { CreateBatchDto } from 'src/app/interfaces/dto/create-batch';\n\n@Component({\n  selector: 'app-create-batch',\n  templateUrl: './create-batch.component.html',\n  styleUrls: ['./create-batch.component.css'],\n})\nexport class CreateBatchComponent implements OnInit {\n\n  batchId: null = null;\n\n  batchName = '';\n  description = '';\n  price = 0;\n  startDate = '';\n  serviceId = '';\n  totalSeats = 0;\n  mobileNumber = '';\n  minStartDate = '';\n\n  services: any[] = [];\n  isSubmitting = false;\n\n  // ✅ POPUP STATES\n  showSuccessPopup = false;\n  showErrorPopup = false;\n  errorMessage = 'Batch creation failed. Please try again.';\n\n  constructor(\n    private batchManageService: BatchManageService,\n    private serviceQueryService: ServiceQueryService,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n    this.setMinStartDate();\n    this.fetchServices();\n  }\n\n  setMinStartDate(): void {\n    const today = new Date();\n    this.minStartDate = today.toISOString().split('T')[0];\n  }\n\n  fetchServices(): void {\n    this.serviceQueryService.getAllServices().subscribe({\n      next: (services) => {\n        this.services = services;\n      },\n      error: () => {\n        this.showErrorPopup = true;\n        this.errorMessage = 'Unable to load services.';\n      },\n    });\n  }\n\n  submitBatch(): void {\n    if (this.isSubmitting) return;\n\n    const payload: CreateBatchDto = {\n      batchName: this.batchName,\n      description: this.description,\n      price: this.price,\n      totalSeats: this.totalSeats,\n      availableSeats: this.totalSeats,\n      startDate: this.startDate,\n      serviceId: this.serviceId,\n      mobileNumber: this.mobileNumber,\n    };\n\n    this.isSubmitting = true;\n\n    this.batchManageService.createBatch(payload).subscribe({\n      next: () => {\n        this.isSubmitting = false;\n        this.showSuccessPopup = true;\n\n        setTimeout(() => {\n          this.showSuccessPopup = false;\n          this.router.navigate(['/instructor/batches']);\n        }, 1800);\n      },\n      error: (error) => {\n        console.error('Batch creation failed', error);\n        this.isSubmitting = false;\n        this.showErrorPopup = true;\n        this.errorMessage =\n          error?.error || 'Batch creation failed. Please try again.';\n      },\n    });\n  }\n\n  closeErrorPopup(): void {\n    this.showErrorPopup = false;\n  }\n}\n","<div class=\"batch-container\">\n\n  <h2 class=\"page-title\">\n    {{ batchId ? 'Edit Batch' : 'Create New Batch' }}\n  </h2>\n\n  <form\n    class=\"batch-form\"\n    (ngSubmit)=\"submitBatch()\"\n    #batchForm=\"ngForm\"\n  >\n    <!-- (YOUR EXISTING FORM – UNCHANGED) -->\n    <!-- ... everything stays exactly the same ... -->\n\n    <button\n      class=\"btn btn-primary-custom\"\n      type=\"submit\"\n      [disabled]=\"batchForm.invalid || isSubmitting\"\n    >\n      {{ batchId ? 'Update Batch' : 'Create Batch' }}\n    </button>\n  </form>\n</div>\n\n<!-- ✅ SUCCESS POPUP -->\n<div class=\"popup-overlay\" *ngIf=\"showSuccessPopup\">\n  <div class=\"popup success\">\n    <h3>✅ Batch Created</h3>\n    <p>Your batch has been created successfully.</p>\n  </div>\n</div>\n\n<!-- ❌ ERROR POPUP -->\n<div class=\"popup-overlay\" *ngIf=\"showErrorPopup\">\n  <div class=\"popup error\">\n    <h3>❌ Error</h3>\n    <p>{{ errorMessage }}</p>\n    <button class=\"btn btn-outline\" (click)=\"closeErrorPopup()\">\n      Close\n    </button>\n  </div>\n</div>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}