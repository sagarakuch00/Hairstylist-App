{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let BookBatchComponent = class BookBatchComponent {\n  constructor(batchQueryService, bookingService, router) {\n    this.batchQueryService = batchQueryService;\n    this.bookingService = bookingService;\n    this.router = router;\n    this.batches = [];\n    this.bookingInProgress = null;\n  }\n  ngOnInit() {\n    this.loadBatches();\n  }\n  // ===============================\n  // LOAD AVAILABLE BATCHES\n  // ===============================\n  loadBatches() {\n    this.batchQueryService.getAllBatchesForUsers().subscribe({\n      next: res => {\n        this.batches = res;\n      },\n      error: err => {\n        console.error('Failed to load batches', err);\n      }\n    });\n  }\n  // ===============================\n  // BOOK BATCH\n  // ===============================\n  bookBatch(batch) {\n    if (batch.availableSeats === 0 || this.bookingInProgress) return;\n    this.bookingInProgress = batch.batchId;\n    const payload = {\n      batchId: batch.batchId\n    };\n    this.bookingService.createBooking(payload).subscribe({\n      next: res => {\n        // ðŸ‘‰ Optional: redirect to payment\n        this.router.navigate(['/user/payment'], {\n          state: {\n            bookingId: res.bookingId,\n            amount: batch.price\n          }\n        });\n      },\n      error: err => {\n        console.error('Booking failed', err);\n        alert(err.error?.message || 'Failed to book batch');\n        this.bookingInProgress = null;\n      }\n    });\n  }\n};\nBookBatchComponent = __decorate([Component({\n  selector: 'app-book-batch',\n  templateUrl: './book-batch.component.html',\n  styleUrls: ['./book-batch.component.css']\n})], BookBatchComponent);","map":{"version":3,"names":["Component","BookBatchComponent","constructor","batchQueryService","bookingService","router","batches","bookingInProgress","ngOnInit","loadBatches","getAllBatchesForUsers","subscribe","next","res","error","err","console","bookBatch","batch","availableSeats","batchId","payload","createBooking","navigate","state","bookingId","amount","price","alert","message","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\Sagar\\OneDrive\\Desktop\\Hairstylist Amar\\HairstylistAmar-Client-Angular\\HairStylistAmar\\src\\app\\modules\\user\\dashboard\\dashboard.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { BatchQueryService } from 'src/app/services/batches/batch-query.service';\nimport { BookingService } from 'src/app/services/bookings/booking.service';\n\n@Component({\n  selector: 'app-book-batch',\n  templateUrl: './book-batch.component.html',\n  styleUrls: ['./book-batch.component.css']\n})\nexport class BookBatchComponent implements OnInit {\n\n  batches: any[] = [];\n  bookingInProgress: string | null = null;\n\n  constructor(\n    private batchQueryService: BatchQueryService,\n    private bookingService: BookingService,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n    this.loadBatches();\n  }\n\n  // ===============================\n  // LOAD AVAILABLE BATCHES\n  // ===============================\n  loadBatches(): void {\n    this.batchQueryService.getAllBatchesForUsers().subscribe({\n      next: (res) => {\n        this.batches = res;\n      },\n      error: (err) => {\n        console.error('Failed to load batches', err);\n      }\n    });\n  }\n\n  // ===============================\n  // BOOK BATCH\n  // ===============================\n  bookBatch(batch: any): void {\n\n    if (batch.availableSeats === 0 || this.bookingInProgress) return;\n\n    this.bookingInProgress = batch.batchId;\n\n    const payload = {\n      batchId: batch.batchId\n    };\n\n    this.bookingService.createBooking(payload).subscribe({\n      next: (res) => {\n        // ðŸ‘‰ Optional: redirect to payment\n        this.router.navigate(['/user/payment'], {\n          state: {\n            bookingId: res.bookingId,\n            amount: batch.price\n          }\n        });\n      },\n      error: (err) => {\n        console.error('Booking failed', err);\n        alert(err.error?.message || 'Failed to book batch');\n        this.bookingInProgress = null;\n      }\n    });\n  }\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAU1C,WAAMC,kBAAkB,GAAxB,MAAMA,kBAAkB;EAK7BC,YACUC,iBAAoC,EACpCC,cAA8B,EAC9BC,MAAc;IAFd,KAAAF,iBAAiB,GAAjBA,iBAAiB;IACjB,KAAAC,cAAc,GAAdA,cAAc;IACd,KAAAC,MAAM,GAANA,MAAM;IANhB,KAAAC,OAAO,GAAU,EAAE;IACnB,KAAAC,iBAAiB,GAAkB,IAAI;EAMpC;EAEHC,QAAQA,CAAA;IACN,IAAI,CAACC,WAAW,EAAE;EACpB;EAEA;EACA;EACA;EACAA,WAAWA,CAAA;IACT,IAAI,CAACN,iBAAiB,CAACO,qBAAqB,EAAE,CAACC,SAAS,CAAC;MACvDC,IAAI,EAAGC,GAAG,IAAI;QACZ,IAAI,CAACP,OAAO,GAAGO,GAAG;MACpB,CAAC;MACDC,KAAK,EAAGC,GAAG,IAAI;QACbC,OAAO,CAACF,KAAK,CAAC,wBAAwB,EAAEC,GAAG,CAAC;MAC9C;KACD,CAAC;EACJ;EAEA;EACA;EACA;EACAE,SAASA,CAACC,KAAU;IAElB,IAAIA,KAAK,CAACC,cAAc,KAAK,CAAC,IAAI,IAAI,CAACZ,iBAAiB,EAAE;IAE1D,IAAI,CAACA,iBAAiB,GAAGW,KAAK,CAACE,OAAO;IAEtC,MAAMC,OAAO,GAAG;MACdD,OAAO,EAAEF,KAAK,CAACE;KAChB;IAED,IAAI,CAAChB,cAAc,CAACkB,aAAa,CAACD,OAAO,CAAC,CAACV,SAAS,CAAC;MACnDC,IAAI,EAAGC,GAAG,IAAI;QACZ;QACA,IAAI,CAACR,MAAM,CAACkB,QAAQ,CAAC,CAAC,eAAe,CAAC,EAAE;UACtCC,KAAK,EAAE;YACLC,SAAS,EAAEZ,GAAG,CAACY,SAAS;YACxBC,MAAM,EAAER,KAAK,CAACS;;SAEjB,CAAC;MACJ,CAAC;MACDb,KAAK,EAAGC,GAAG,IAAI;QACbC,OAAO,CAACF,KAAK,CAAC,gBAAgB,EAAEC,GAAG,CAAC;QACpCa,KAAK,CAACb,GAAG,CAACD,KAAK,EAAEe,OAAO,IAAI,sBAAsB,CAAC;QACnD,IAAI,CAACtB,iBAAiB,GAAG,IAAI;MAC/B;KACD,CAAC;EACJ;CACD;AA3DYN,kBAAkB,GAAA6B,UAAA,EAL9B9B,SAAS,CAAC;EACT+B,QAAQ,EAAE,gBAAgB;EAC1BC,WAAW,EAAE,6BAA6B;EAC1CC,SAAS,EAAE,CAAC,4BAA4B;CACzC,CAAC,C,EACWhC,kBAAkB,CA2D9B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}