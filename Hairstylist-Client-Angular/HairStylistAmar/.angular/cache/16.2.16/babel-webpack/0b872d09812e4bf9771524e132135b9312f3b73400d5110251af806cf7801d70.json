{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/booking.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction MyBookingsComponent_div_0_ng_container_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"div\", 4)(1, \"div\", 5)(2, \"h5\", 6);\n    i0.ÉµÉµtext(3);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(4, \"p\", 7);\n    i0.ÉµÉµelement(5, \"i\", 8);\n    i0.ÉµÉµtext(6);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(7, \"p\", 7);\n    i0.ÉµÉµelement(8, \"i\", 9);\n    i0.ÉµÉµtext(9);\n    i0.ÉµÉµpipe(10, \"date\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(11, \"p\", 10);\n    i0.ÉµÉµelement(12, \"i\", 11);\n    i0.ÉµÉµtext(13);\n    i0.ÉµÉµpipe(14, \"date\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(15, \"span\", 12);\n    i0.ÉµÉµtext(16, \" Pending \");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(17, \"div\", 13)(18, \"button\", 14);\n    i0.ÉµÉµlistener(\"click\", function MyBookingsComponent_div_0_ng_container_1_div_1_Template_button_click_18_listener() {\n      i0.ÉµÉµrestoreView(_r6);\n      const booking_r2 = i0.ÉµÉµnextContext().$implicit;\n      const ctx_r4 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r4.makePayment(booking_r2));\n    });\n    i0.ÉµÉµtext(19, \" Pay Now \");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(20, \"button\", 15);\n    i0.ÉµÉµlistener(\"click\", function MyBookingsComponent_div_0_ng_container_1_div_1_Template_button_click_20_listener() {\n      i0.ÉµÉµrestoreView(_r6);\n      const booking_r2 = i0.ÉµÉµnextContext().$implicit;\n      const ctx_r7 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r7.cancelBooking(booking_r2));\n    });\n    i0.ÉµÉµtext(21, \" Cancel \");\n    i0.ÉµÉµelementEnd()()()();\n  }\n  if (rf & 2) {\n    const booking_r2 = i0.ÉµÉµnextContext().$implicit;\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate(booking_r2.batch == null ? null : booking_r2.batch.batchName);\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate1(\" Instructor: \", booking_r2.batch == null ? null : booking_r2.batch.instructor == null ? null : booking_r2.batch.instructor.name, \" \");\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate1(\" Start Date: \", i0.ÉµÉµpipeBind1(10, 4, booking_r2.batch == null ? null : booking_r2.batch.startDate), \" \");\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµtextInterpolate1(\" Booked on: \", i0.ÉµÉµpipeBind1(14, 6, booking_r2.bookingDate), \" \");\n  }\n}\nfunction MyBookingsComponent_div_0_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementContainerStart(0);\n    i0.ÉµÉµtemplate(1, MyBookingsComponent_div_0_ng_container_1_div_1_Template, 22, 8, \"div\", 3);\n    i0.ÉµÉµelementContainerEnd();\n  }\n  if (rf & 2) {\n    const booking_r2 = ctx.$implicit;\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngIf\", booking_r2.status !== \"Cancelled\");\n  }\n}\nfunction MyBookingsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 1);\n    i0.ÉµÉµtemplate(1, MyBookingsComponent_div_0_ng_container_1_Template, 2, 1, \"ng-container\", 2);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngForOf\", ctx_r0.bookings);\n  }\n}\nexport class MyBookingsComponent {\n  constructor(bookingService, router) {\n    this.bookingService = bookingService;\n    this.router = router;\n    this.bookings = [];\n  }\n  ngOnInit() {\n    this.loadBookings();\n  }\n  loadBookings() {\n    const userId = localStorage.getItem(\"userId\");\n    if (!userId) {\n      alert(\"Please login again.\");\n      this.router.navigate(['/login']);\n      return;\n    }\n    this.bookingService.getBookingsByUser(userId).subscribe({\n      next: res => this.bookings = res,\n      error: err => console.error(err)\n    });\n  }\n  makePayment(booking) {\n    this.router.navigate(['/user/payment'], {\n      state: {\n        bookingId: booking.bookingId,\n        amount: booking.batch.price\n      }\n    });\n  }\n  cancelBooking(booking) {\n    if (!booking?.bookingId) {\n      console.error('Invalid booking object', booking);\n      return;\n    }\n    if (!confirm('Are you sure you want to cancel this booking?')) return;\n    this.bookingService.cancelBooking(booking.bookingId).subscribe({\n      next: () => {\n        // ðŸ”¥ REMOVE FROM UI\n        this.bookings = this.bookings.filter(b => b.bookingId !== booking.bookingId);\n      },\n      error: err => {\n        console.error(err);\n        alert(err.error?.message || 'Failed to cancel booking');\n      }\n    });\n  }\n  static {\n    this.Éµfac = function MyBookingsComponent_Factory(t) {\n      return new (t || MyBookingsComponent)(i0.ÉµÉµdirectiveInject(i1.BookingService), i0.ÉµÉµdirectiveInject(i2.Router));\n    };\n  }\n  static {\n    this.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n      type: MyBookingsComponent,\n      selectors: [[\"app-my-bookings\"]],\n      decls: 1,\n      vars: 1,\n      consts: [[\"class\", \"row g-4\", 4, \"ngIf\"], [1, \"row\", \"g-4\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"col-md-4\", 4, \"ngIf\"], [1, \"col-md-4\"], [1, \"card\", \"card-custom\", \"p-3\", \"shadow-sm\"], [1, \"fw-bold\"], [1, \"text-muted\", \"mb-1\"], [1, \"bi\", \"bi-person-badge\"], [1, \"bi\", \"bi-calendar-event\"], [1, \"mb-1\"], [1, \"bi\", \"bi-clock-history\"], [1, \"badge\", \"mt-2\", \"bg-warning\", \"text-dark\"], [1, \"d-flex\", \"gap-2\", \"mt-3\"], [1, \"btn\", \"btn-primary-custom\", \"flex-fill\", 3, \"click\"], [1, \"btn\", \"btn-cancel-custom\", \"flex-fill\", 3, \"click\"]],\n      template: function MyBookingsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ÉµÉµtemplate(0, MyBookingsComponent_div_0_Template, 2, 1, \"div\", 0);\n        }\n        if (rf & 2) {\n          i0.ÉµÉµproperty(\"ngIf\", ctx.bookings.length > 0);\n        }\n      },\n      dependencies: [i3.NgForOf, i3.NgIf, i3.DatePipe],\n      styles: [\"\\n\\n.page-title[_ngcontent-%COMP%] {\\n  font-size: 28px;\\n  font-weight: 700;\\n  color: #7A4EAB;\\n}\\n\\n\\n\\n.card-custom[_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #FDE2E4, #E6E0FF);\\n  border-radius: 16px;\\n  border: none;\\n  padding: 20px;\\n  box-shadow: 0 6px 18px rgba(122, 78, 171, 0.15);\\n  transition: transform .3s ease, box-shadow .3s ease;\\n}\\n\\n\\n\\n.card-custom[_ngcontent-%COMP%]:hover {\\n  transform: translateY(-6px);\\n  box-shadow: 0 12px 28px rgba(122, 78, 171, 0.25);\\n}\\n\\n\\n\\n.card-custom[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\\n  color: #7A4EAB;\\n  margin-bottom: 10px;\\n  font-weight: 700;\\n}\\n\\n\\n\\n.text-muted[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .mb-1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\\n  color: #A57AD1;\\n  margin-right: 6px;\\n}\\n\\n\\n\\n.badge[_ngcontent-%COMP%] {\\n  padding: 6px 14px;\\n  border-radius: 14px;\\n  font-size: 13px;\\n  font-weight: 600;\\n}\\n\\n\\n\\n.bg-warning[_ngcontent-%COMP%] {\\n  background-color: #FFF3B0 !important;\\n  color: #7A4EAB !important;\\n}\\n\\n\\n\\n.d-flex.gap-2[_ngcontent-%COMP%] {\\n  margin-top: 14px;\\n}\\n\\n\\n\\n.btn-primary-custom[_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #9d4edd, #c77dff);\\n  border: none;\\n  color: #fff;\\n  font-weight: 600;\\n  border-radius: 12px;\\n  padding: 10px 0;\\n  transition: all 0.25s ease;\\n}\\n\\n.btn-primary-custom[_ngcontent-%COMP%]:hover {\\n  background: linear-gradient(135deg, #7b2cbf, #9d4edd);\\n  transform: translateY(-1px);\\n}\\n\\n\\n\\n.btn-cancel-custom[_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #ffd6e8, #f7b7d2);\\n  border: none;\\n  color: #7b2cbf;\\n  font-weight: 600;\\n  border-radius: 12px;\\n  padding: 10px 0;\\n  transition: all 0.25s ease;\\n}\\n\\n.btn-cancel-custom[_ngcontent-%COMP%]:hover {\\n  background: linear-gradient(135deg, #f7b7d2, #f3a0c5);\\n  color: #5a189a;\\n  transform: translateY(-1px);\\n}\\n\\n\\n\\n.container[_ngcontent-%COMP%] {\\n  animation: _ngcontent-%COMP%_fadeIn .4s ease-in-out;\\n}\\n\\n@keyframes _ngcontent-%COMP%_fadeIn {\\n  from { opacity: 0; transform: translateY(10px); }\\n  to   { opacity: 1; transform: translateY(0); }\\n}\\n\\n\\n\\n.card-custom[_ngcontent-%COMP%] {\\n  min-height: 260px;   \\n\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-between;\\n}\\n\\n\\n\\n.card-custom[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%] {\\n  margin-top: auto;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdXNlci9teS1ib29raW5ncy9teS1ib29raW5ncy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGtCQUFrQjtBQUNsQjtFQUNFLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsY0FBYztBQUNoQjs7QUFFQSxvQkFBb0I7QUFDcEI7RUFDRSxxREFBcUQ7RUFDckQsbUJBQW1CO0VBQ25CLFlBQVk7RUFDWixhQUFhO0VBQ2IsK0NBQStDO0VBQy9DLG1EQUFtRDtBQUNyRDs7QUFFQSxvQkFBb0I7QUFDcEI7RUFDRSwyQkFBMkI7RUFDM0IsZ0RBQWdEO0FBQ2xEOztBQUVBLGtCQUFrQjtBQUNsQjtFQUNFLGNBQWM7RUFDZCxtQkFBbUI7RUFDbkIsZ0JBQWdCO0FBQ2xCOztBQUVBLGFBQWE7QUFDYjs7RUFFRSxjQUFjO0VBQ2QsaUJBQWlCO0FBQ25COztBQUVBLG9CQUFvQjtBQUNwQjtFQUNFLGlCQUFpQjtFQUNqQixtQkFBbUI7RUFDbkIsZUFBZTtFQUNmLGdCQUFnQjtBQUNsQjs7QUFFQSxZQUFZO0FBQ1o7RUFDRSxvQ0FBb0M7RUFDcEMseUJBQXlCO0FBQzNCOztBQUVBLHVCQUF1QjtBQUN2QjtFQUNFLGdCQUFnQjtBQUNsQjs7QUFFQSxrQkFBa0I7QUFDbEI7RUFDRSxxREFBcUQ7RUFDckQsWUFBWTtFQUNaLFdBQVc7RUFDWCxnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLGVBQWU7RUFDZiwwQkFBMEI7QUFDNUI7O0FBRUE7RUFDRSxxREFBcUQ7RUFDckQsMkJBQTJCO0FBQzdCOztBQUVBLHFCQUFxQjtBQUNyQjtFQUNFLHFEQUFxRDtFQUNyRCxZQUFZO0VBQ1osY0FBYztFQUNkLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsZUFBZTtFQUNmLDBCQUEwQjtBQUM1Qjs7QUFFQTtFQUNFLHFEQUFxRDtFQUNyRCxjQUFjO0VBQ2QsMkJBQTJCO0FBQzdCOztBQUVBLHNCQUFzQjtBQUN0QjtFQUNFLGlDQUFpQztBQUNuQzs7QUFFQTtFQUNFLE9BQU8sVUFBVSxFQUFFLDJCQUEyQixFQUFFO0VBQ2hELE9BQU8sVUFBVSxFQUFFLHdCQUF3QixFQUFFO0FBQy9DOztBQUVBLG9DQUFvQztBQUNwQztFQUNFLGlCQUFpQixJQUFJLHdCQUF3QjtFQUM3QyxhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLDhCQUE4QjtBQUNoQzs7QUFFQSw2Q0FBNkM7QUFDN0M7RUFDRSxnQkFBZ0I7QUFDbEIiLCJzb3VyY2VzQ29udGVudCI6WyIvKiDDsMKfwozCuCBQYWdlIFRpdGxlICovXHJcbi5wYWdlLXRpdGxlIHtcclxuICBmb250LXNpemU6IDI4cHg7XHJcbiAgZm9udC13ZWlnaHQ6IDcwMDtcclxuICBjb2xvcjogIzdBNEVBQjtcclxufVxyXG5cclxuLyogw7DCn8KMwrggQ2FyZCBTdHlsaW5nICovXHJcbi5jYXJkLWN1c3RvbSB7XHJcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI0ZERTJFNCwgI0U2RTBGRik7XHJcbiAgYm9yZGVyLXJhZGl1czogMTZweDtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgcGFkZGluZzogMjBweDtcclxuICBib3gtc2hhZG93OiAwIDZweCAxOHB4IHJnYmEoMTIyLCA3OCwgMTcxLCAwLjE1KTtcclxuICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gLjNzIGVhc2UsIGJveC1zaGFkb3cgLjNzIGVhc2U7XHJcbn1cclxuXHJcbi8qIMOwwp/CjMK4IEhvdmVyIEVmZmVjdCAqL1xyXG4uY2FyZC1jdXN0b206aG92ZXIge1xyXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNnB4KTtcclxuICBib3gtc2hhZG93OiAwIDEycHggMjhweCByZ2JhKDEyMiwgNzgsIDE3MSwgMC4yNSk7XHJcbn1cclxuXHJcbi8qIMOwwp/CjMK4IENhcmQgVGl0bGUgKi9cclxuLmNhcmQtY3VzdG9tIGg1IHtcclxuICBjb2xvcjogIzdBNEVBQjtcclxuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG4gIGZvbnQtd2VpZ2h0OiA3MDA7XHJcbn1cclxuXHJcbi8qIMOwwp/CjMK4IEljb25zICovXHJcbi50ZXh0LW11dGVkIGksXHJcbi5tYi0xIGkge1xyXG4gIGNvbG9yOiAjQTU3QUQxO1xyXG4gIG1hcmdpbi1yaWdodDogNnB4O1xyXG59XHJcblxyXG4vKiDDsMKfwozCuCBTdGF0dXMgQmFkZ2UgKi9cclxuLmJhZGdlIHtcclxuICBwYWRkaW5nOiA2cHggMTRweDtcclxuICBib3JkZXItcmFkaXVzOiAxNHB4O1xyXG4gIGZvbnQtc2l6ZTogMTNweDtcclxuICBmb250LXdlaWdodDogNjAwO1xyXG59XHJcblxyXG4vKiBQZW5kaW5nICovXHJcbi5iZy13YXJuaW5nIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjRkZGM0IwICFpbXBvcnRhbnQ7XHJcbiAgY29sb3I6ICM3QTRFQUIgIWltcG9ydGFudDtcclxufVxyXG5cclxuLyogw7DCn8KMwrggQnV0dG9ucyBXcmFwcGVyICovXHJcbi5kLWZsZXguZ2FwLTIge1xyXG4gIG1hcmdpbi10b3A6IDE0cHg7XHJcbn1cclxuXHJcbi8qIMOwwp/CjMK4IFBheSBCdXR0b24gKi9cclxuLmJ0bi1wcmltYXJ5LWN1c3RvbSB7XHJcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzlkNGVkZCwgI2M3N2RmZik7XHJcbiAgYm9yZGVyOiBub25lO1xyXG4gIGNvbG9yOiAjZmZmO1xyXG4gIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgYm9yZGVyLXJhZGl1czogMTJweDtcclxuICBwYWRkaW5nOiAxMHB4IDA7XHJcbiAgdHJhbnNpdGlvbjogYWxsIDAuMjVzIGVhc2U7XHJcbn1cclxuXHJcbi5idG4tcHJpbWFyeS1jdXN0b206aG92ZXIge1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM3YjJjYmYsICM5ZDRlZGQpO1xyXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTtcclxufVxyXG5cclxuLyogw7DCn8KMwrggQ2FuY2VsIEJ1dHRvbiAqL1xyXG4uYnRuLWNhbmNlbC1jdXN0b20ge1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmZmQ2ZTgsICNmN2I3ZDIpO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBjb2xvcjogIzdiMmNiZjtcclxuICBmb250LXdlaWdodDogNjAwO1xyXG4gIGJvcmRlci1yYWRpdXM6IDEycHg7XHJcbiAgcGFkZGluZzogMTBweCAwO1xyXG4gIHRyYW5zaXRpb246IGFsbCAwLjI1cyBlYXNlO1xyXG59XHJcblxyXG4uYnRuLWNhbmNlbC1jdXN0b206aG92ZXIge1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmN2I3ZDIsICNmM2EwYzUpO1xyXG4gIGNvbG9yOiAjNWExODlhO1xyXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTtcclxufVxyXG5cclxuLyogw7DCn8KMwrggR3JpZCBBbmltYXRpb24gKi9cclxuLmNvbnRhaW5lciB7XHJcbiAgYW5pbWF0aW9uOiBmYWRlSW4gLjRzIGVhc2UtaW4tb3V0O1xyXG59XHJcblxyXG5Aa2V5ZnJhbWVzIGZhZGVJbiB7XHJcbiAgZnJvbSB7IG9wYWNpdHk6IDA7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgxMHB4KTsgfVxyXG4gIHRvICAgeyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7IH1cclxufVxyXG5cclxuLyogw7DCn8KMwrggS2VlcCBib29raW5nIGNhcmRzIHNhbWUgc2l6ZSAqL1xyXG4uY2FyZC1jdXN0b20ge1xyXG4gIG1pbi1oZWlnaHQ6IDI2MHB4OyAgIC8qIGNvbnRyb2xzIGJveCBoZWlnaHQgKi9cclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG59XHJcblxyXG4vKiDDsMKfwozCuCBFbnN1cmUgYnV0dG9uIHNlY3Rpb24gc3RheXMgYXQgYm90dG9tICovXHJcbi5jYXJkLWN1c3RvbSAuZC1mbGV4IHtcclxuICBtYXJnaW4tdG9wOiBhdXRvO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ÉµÉµelementStart","ÉµÉµtext","ÉµÉµelementEnd","ÉµÉµelement","ÉµÉµlistener","MyBookingsComponent_div_0_ng_container_1_div_1_Template_button_click_18_listener","ÉµÉµrestoreView","_r6","booking_r2","ÉµÉµnextContext","$implicit","ctx_r4","ÉµÉµresetView","makePayment","MyBookingsComponent_div_0_ng_container_1_div_1_Template_button_click_20_listener","ctx_r7","cancelBooking","ÉµÉµadvance","ÉµÉµtextInterpolate","batch","batchName","ÉµÉµtextInterpolate1","instructor","name","ÉµÉµpipeBind1","startDate","bookingDate","ÉµÉµelementContainerStart","ÉµÉµtemplate","MyBookingsComponent_div_0_ng_container_1_div_1_Template","ÉµÉµelementContainerEnd","ÉµÉµproperty","status","MyBookingsComponent_div_0_ng_container_1_Template","ctx_r0","bookings","MyBookingsComponent","constructor","bookingService","router","ngOnInit","loadBookings","userId","localStorage","getItem","alert","navigate","getBookingsByUser","subscribe","next","res","error","err","console","booking","state","bookingId","amount","price","confirm","filter","b","message","ÉµÉµdirectiveInject","i1","BookingService","i2","Router","selectors","decls","vars","consts","template","MyBookingsComponent_Template","rf","ctx","MyBookingsComponent_div_0_Template","length"],"sources":["C:\\Users\\Sagar\\OneDrive\\Desktop\\Hairstylist Amar\\HairstylistAmar-Client-Angular\\HairStylistAmar\\src\\app\\user\\my-bookings\\my-bookings.component.ts","C:\\Users\\Sagar\\OneDrive\\Desktop\\Hairstylist Amar\\HairstylistAmar-Client-Angular\\HairStylistAmar\\src\\app\\user\\my-bookings\\my-bookings.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { BookingService } from '../../services/booking.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-my-bookings',\n  templateUrl: './my-bookings.component.html',\n  styleUrls: ['./my-bookings.component.css']\n})\nexport class MyBookingsComponent implements OnInit {\n\n  bookings: any[] = [];\n\n\n  constructor(\n    private bookingService: BookingService,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n    this.loadBookings();\n  }\n\n  loadBookings() {\n    const userId = localStorage.getItem(\"userId\");\n\n    if (!userId) {\n      alert(\"Please login again.\");\n      this.router.navigate(['/login']);\n      return;\n    }\n\n    this.bookingService.getBookingsByUser(userId).subscribe({\n      next: (res: any) => this.bookings = res,\n      error: (err) => console.error(err)\n    });\n  }\n\n  makePayment(booking: any) {\n    this.router.navigate(['/user/payment'], {\n      state: {\n        bookingId: booking.bookingId,\n        amount: booking.batch.price\n      }\n    });\n  }\n\n  cancelBooking(booking: any) {\n  if (!booking?.bookingId) {\n    console.error('Invalid booking object', booking);\n    return;\n  }\n\n  if (!confirm('Are you sure you want to cancel this booking?')) return;\n\n  this.bookingService.cancelBooking(booking.bookingId).subscribe({\n    next: () => {\n      // ðŸ”¥ REMOVE FROM UI\n      this.bookings = this.bookings.filter(\n        b => b.bookingId !== booking.bookingId\n      );\n    },\n    error: (err) => {\n      console.error(err);\n      alert(err.error?.message || 'Failed to cancel booking');\n    }\n  });\n}\n\n\n\n\n\n\n}\n","<div class=\"row g-4\" *ngIf=\"bookings.length > 0\">\n  <ng-container *ngFor=\"let booking of bookings\">\n    <div class=\"col-md-4\" *ngIf=\"booking.status !== 'Cancelled'\">\n      <div class=\"card card-custom p-3 shadow-sm\">\n\n        <h5 class=\"fw-bold\">{{ booking.batch?.batchName }}</h5>\n\n        <p class=\"text-muted mb-1\">\n          <i class=\"bi bi-person-badge\"></i>\n          Instructor: {{ booking.batch?.instructor?.name }}\n        </p>\n\n        <p class=\"text-muted mb-1\">\n          <i class=\"bi bi-calendar-event\"></i>\n          Start Date: {{ booking.batch?.startDate | date }}\n        </p>\n\n        <p class=\"mb-1\">\n          <i class=\"bi bi-clock-history\"></i>\n          Booked on: {{ booking.bookingDate | date }}\n        </p>\n\n        <span\n          class=\"badge mt-2 bg-warning text-dark\">\n          Pending\n        </span>\n\n        <div class=\"d-flex gap-2 mt-3\">\n          <button\n            class=\"btn btn-primary-custom flex-fill\"\n            (click)=\"makePayment(booking)\">\n            Pay Now\n          </button>\n\n          <button\n            class=\"btn btn-cancel-custom flex-fill\"\n            (click)=\"cancelBooking(booking)\">\n            Cancel\n          </button>\n        </div>\n\n      </div>\n    </div>\n  </ng-container>\n</div>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}