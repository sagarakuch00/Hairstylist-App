{"ast":null,"code":"import { BehaviorSubject, of } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { API } from 'src/app/core/api/api-constants.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class BatchManageService {\n  constructor(http) {\n    this.http = http;\n    // üîπ Cache for instructor batches\n    this.batchesSubject = new BehaviorSubject(null);\n  }\n  // üì¶ GET batches (used by dashboard ‚Üí cached)\n  getInstructorBatches() {\n    if (this.batchesSubject.value) {\n      return of(this.batchesSubject.value);\n    }\n    return this.http.get(`${API.batchesManage}`).pipe(tap(batches => this.batchesSubject.next(batches)));\n  }\n  // üîÑ Force refresh\n  refreshInstructorBatches() {\n    return this.http.get(`${API.batchesManage}`).pipe(tap(batches => this.batchesSubject.next(batches)));\n  }\n  // ‚ûï Create batch\n  createBatch(payload) {\n    return this.http.post(`${API.batches}/manage`, payload).pipe(tap(() => this.refreshInstructorBatches().subscribe()));\n  }\n  // üîç Get batch by id (EditBatchComponent)\n  getBatchById(id) {\n    return this.http.get(`${API.batches}/${id}`);\n  }\n  // ‚úèÔ∏è Update batch\n  updateBatch(batchId, payload) {\n    return this.http.put(`${API.batchesManage}/${batchId}`, payload).pipe(tap(() => this.refreshInstructorBatches().subscribe()));\n  }\n  // üóëÔ∏è Delete batch\n  deleteBatch(batchId) {\n    return this.http.delete(`${API.batchesManage}/${batchId}`).pipe(tap(() => this.refreshInstructorBatches().subscribe()));\n  }\n  // üßπ Clear cache (on logout)\n  clearCache() {\n    this.batchesSubject.next(null);\n  }\n  static {\n    this.…µfac = function BatchManageService_Factory(t) {\n      return new (t || BatchManageService)(i0.…µ…µinject(i1.HttpClient));\n    };\n  }\n  static {\n    this.…µprov = /*@__PURE__*/i0.…µ…µdefineInjectable({\n      token: BatchManageService,\n      factory: BatchManageService.…µfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["BehaviorSubject","of","tap","API","BatchManageService","constructor","http","batchesSubject","getInstructorBatches","value","get","batchesManage","pipe","batches","next","refreshInstructorBatches","createBatch","payload","post","subscribe","getBatchById","id","updateBatch","batchId","put","deleteBatch","delete","clearCache","i0","…µ…µinject","i1","HttpClient","factory","…µfac","providedIn"],"sources":["C:\\Users\\Sagar\\OneDrive\\Desktop\\Hairstylist Amar\\HairstylistAmar-Client-Angular\\HairStylistAmar\\src\\app\\services\\batches\\batch-manage.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, BehaviorSubject, of } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { API } from 'src/app/core/api/api-constants.service';\nimport { Batch } from 'src/app/interfaces/Batch';\nimport { CreateBatchDto } from 'src/app/interfaces/dto/create-batch';\nimport { UpdateBatchDto } from 'src/app/interfaces/dto/update-batch';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class BatchManageService {\n\n  // üîπ Cache for instructor batches\n  private batchesSubject = new BehaviorSubject<any[] | null>(null);\n\n  constructor(private http: HttpClient) {}\n\n  // üì¶ GET batches (used by dashboard ‚Üí cached)\n  getInstructorBatches(): Observable<any[]> {\n    if (this.batchesSubject.value) {\n      return of(this.batchesSubject.value);\n    }\n\n    return this.http.get<any[]>(`${API.batchesManage}`).pipe(\n      tap(batches => this.batchesSubject.next(batches))\n    );\n  }\n\n  // üîÑ Force refresh\n  refreshInstructorBatches(): Observable<any[]> {\n    return this.http.get<any[]>(`${API.batchesManage}`).pipe(\n      tap(batches => this.batchesSubject.next(batches))\n    );\n  }\n\n  // ‚ûï Create batch\n  createBatch(payload: CreateBatchDto): Observable<any> {\n    return this.http.post(`${API.batches}/manage`, payload).pipe(\n      tap(() => this.refreshInstructorBatches().subscribe())\n    );\n  }\n\n  // üîç Get batch by id (EditBatchComponent)\n  getBatchById(id: string): Observable<Batch> {\n    return this.http.get<Batch>(`${API.batches}/${id}`);\n  }\n\n  // ‚úèÔ∏è Update batch\n  updateBatch(batchId: string, payload: UpdateBatchDto): Observable<any> {\n    return this.http.put(`${API.batchesManage}/${batchId}`, payload).pipe(\n      tap(() => this.refreshInstructorBatches().subscribe())\n    );\n  }\n\n  // üóëÔ∏è Delete batch\n  deleteBatch(batchId: string): Observable<any> {\n    return this.http.delete(`${API.batchesManage}/${batchId}`).pipe(\n      tap(() => this.refreshInstructorBatches().subscribe())\n    );\n  }\n\n  // üßπ Clear cache (on logout)\n  clearCache(): void {\n    this.batchesSubject.next(null);\n  }\n}\n"],"mappings":"AAEA,SAAqBA,eAAe,EAAEC,EAAE,QAAQ,MAAM;AACtD,SAASC,GAAG,QAAQ,gBAAgB;AACpC,SAASC,GAAG,QAAQ,wCAAwC;;;AAQ5D,OAAM,MAAOC,kBAAkB;EAK7BC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IAHxB;IACQ,KAAAC,cAAc,GAAG,IAAIP,eAAe,CAAe,IAAI,CAAC;EAEzB;EAEvC;EACAQ,oBAAoBA,CAAA;IAClB,IAAI,IAAI,CAACD,cAAc,CAACE,KAAK,EAAE;MAC7B,OAAOR,EAAE,CAAC,IAAI,CAACM,cAAc,CAACE,KAAK,CAAC;;IAGtC,OAAO,IAAI,CAACH,IAAI,CAACI,GAAG,CAAQ,GAAGP,GAAG,CAACQ,aAAa,EAAE,CAAC,CAACC,IAAI,CACtDV,GAAG,CAACW,OAAO,IAAI,IAAI,CAACN,cAAc,CAACO,IAAI,CAACD,OAAO,CAAC,CAAC,CAClD;EACH;EAEA;EACAE,wBAAwBA,CAAA;IACtB,OAAO,IAAI,CAACT,IAAI,CAACI,GAAG,CAAQ,GAAGP,GAAG,CAACQ,aAAa,EAAE,CAAC,CAACC,IAAI,CACtDV,GAAG,CAACW,OAAO,IAAI,IAAI,CAACN,cAAc,CAACO,IAAI,CAACD,OAAO,CAAC,CAAC,CAClD;EACH;EAEA;EACAG,WAAWA,CAACC,OAAuB;IACjC,OAAO,IAAI,CAACX,IAAI,CAACY,IAAI,CAAC,GAAGf,GAAG,CAACU,OAAO,SAAS,EAAEI,OAAO,CAAC,CAACL,IAAI,CAC1DV,GAAG,CAAC,MAAM,IAAI,CAACa,wBAAwB,EAAE,CAACI,SAAS,EAAE,CAAC,CACvD;EACH;EAEA;EACAC,YAAYA,CAACC,EAAU;IACrB,OAAO,IAAI,CAACf,IAAI,CAACI,GAAG,CAAQ,GAAGP,GAAG,CAACU,OAAO,IAAIQ,EAAE,EAAE,CAAC;EACrD;EAEA;EACAC,WAAWA,CAACC,OAAe,EAAEN,OAAuB;IAClD,OAAO,IAAI,CAACX,IAAI,CAACkB,GAAG,CAAC,GAAGrB,GAAG,CAACQ,aAAa,IAAIY,OAAO,EAAE,EAAEN,OAAO,CAAC,CAACL,IAAI,CACnEV,GAAG,CAAC,MAAM,IAAI,CAACa,wBAAwB,EAAE,CAACI,SAAS,EAAE,CAAC,CACvD;EACH;EAEA;EACAM,WAAWA,CAACF,OAAe;IACzB,OAAO,IAAI,CAACjB,IAAI,CAACoB,MAAM,CAAC,GAAGvB,GAAG,CAACQ,aAAa,IAAIY,OAAO,EAAE,CAAC,CAACX,IAAI,CAC7DV,GAAG,CAAC,MAAM,IAAI,CAACa,wBAAwB,EAAE,CAACI,SAAS,EAAE,CAAC,CACvD;EACH;EAEA;EACAQ,UAAUA,CAAA;IACR,IAAI,CAACpB,cAAc,CAACO,IAAI,CAAC,IAAI,CAAC;EAChC;;;uBAtDWV,kBAAkB,EAAAwB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;IAAA;EAAA;;;aAAlB3B,kBAAkB;MAAA4B,OAAA,EAAlB5B,kBAAkB,CAAA6B,IAAA;MAAAC,UAAA,EAFjB;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}