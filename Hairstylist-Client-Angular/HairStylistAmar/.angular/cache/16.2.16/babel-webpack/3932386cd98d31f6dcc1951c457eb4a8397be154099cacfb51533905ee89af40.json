{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let EditBatchComponent = class EditBatchComponent {\n  constructor(route, router, batchApi, serviceApi) {\n    this.route = route;\n    this.router = router;\n    this.batchApi = batchApi;\n    this.serviceApi = serviceApi;\n    // ðŸ”‘ Route param\n    this.batchId = null;\n    // ðŸ“ Form fields\n    this.batchName = '';\n    this.description = '';\n    this.price = 0;\n    this.totalSeats = 1;\n    this.startDate = '';\n    this.serviceId = '';\n    this.mobileNumber = '';\n    this.services = [];\n    this.isSubmitting = false;\n    this.minStartDate = '';\n  }\n  ngOnInit() {\n    this.batchId = this.route.snapshot.paramMap.get('batchId');\n    this.minStartDate = this.getToday();\n    this.loadServices();\n    if (this.batchId) {\n      this.loadBatchForEdit(this.batchId);\n    }\n  }\n  // ðŸ”¹ Load all services\n  loadServices() {\n    this.serviceApi.getServices().subscribe({\n      next: res => this.services = res,\n      error: err => console.error('Service load error', err)\n    });\n  }\n  // ðŸ”¹ Load batch data in edit mode\n  loadBatchForEdit(batchId) {\n    this.batchApi.getBatchById(batchId).subscribe({\n      next: batch => {\n        this.batchName = batch.batchName;\n        this.description = batch.description;\n        this.price = batch.price;\n        this.totalSeats = batch.totalSeats;\n        this.startDate = batch.startDate?.split('T')[0];\n        this.serviceId = batch.serviceId;\n        this.mobileNumber = batch.mobileNumber;\n      },\n      error: err => {\n        console.error('Batch load failed', err);\n        alert('Unable to load batch');\n        this.router.navigate(['/instructor/batches']);\n      }\n    });\n  }\n  // ðŸ”¹ Create / Update submit\n  submitBatch() {\n    if (this.isSubmitting) return;\n    this.isSubmitting = true;\n    const payload = {\n      batchName: this.batchName,\n      description: this.description,\n      price: this.price,\n      startDate: this.startDate,\n      serviceId: this.serviceId,\n      totalSeats: this.totalSeats,\n      mobileNumber: this.mobileNumber\n    };\n    if (this.batchId) {\n      // âœï¸ UPDATE\n      this.batchApi.updateBatch(this.batchId, payload).subscribe({\n        next: () => {\n          alert('Batch updated successfully');\n          this.router.navigate(['/instructor/batches']);\n        },\n        error: err => {\n          console.error(err);\n          alert('Update failed');\n          this.isSubmitting = false;\n        }\n      });\n    } else {\n      // âž• CREATE\n      this.batchApi.createBatch(payload).subscribe({\n        next: () => {\n          alert('Batch created successfully');\n          this.router.navigate(['/instructor/batches']);\n        },\n        error: err => {\n          console.error(err);\n          alert('Create failed');\n          this.isSubmitting = false;\n        }\n      });\n    }\n  }\n  // ðŸ”¹ Utility\n  getToday() {\n    const today = new Date();\n    return today.toISOString().split('T')[0];\n  }\n};\nEditBatchComponent = __decorate([Component({\n  selector: 'app-edit-batch',\n  templateUrl: './edit-batch.component.html',\n  styleUrls: ['./edit-batch.component.css']\n})], EditBatchComponent);","map":{"version":3,"names":["Component","EditBatchComponent","constructor","route","router","batchApi","serviceApi","batchId","batchName","description","price","totalSeats","startDate","serviceId","mobileNumber","services","isSubmitting","minStartDate","ngOnInit","snapshot","paramMap","get","getToday","loadServices","loadBatchForEdit","getServices","subscribe","next","res","error","err","console","getBatchById","batch","split","alert","navigate","submitBatch","payload","updateBatch","createBatch","today","Date","toISOString","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\Sagar\\OneDrive\\Desktop\\Hairstylist Amar\\HairstylistAmar-Client-Angular\\HairStylistAmar\\src\\app\\modules\\instructor\\edit-batch\\edit-batch.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { BatchManageService } from 'src/app/services/batches/batch-manage.service';\nimport { ServiceService } from 'src/app/services/service.service';\n\n@Component({\n  selector: 'app-edit-batch',\n  templateUrl: './edit-batch.component.html',\n  styleUrls: ['./edit-batch.component.css']\n})\nexport class EditBatchComponent implements OnInit {\n\n  // ðŸ”‘ Route param\n  batchId: string | null = null;\n\n  // ðŸ“ Form fields\n  batchName = '';\n  description = '';\n  price = 0;\n  totalSeats = 1;\n  startDate = '';\n  serviceId = '';\n  mobileNumber = '';\n\n  services: any[] = [];\n\n  isSubmitting = false;\n  minStartDate = '';\n\n  constructor(\n    private route: ActivatedRoute,\n    private router: Router,\n    private batchApi: BatchManageService,\n    private serviceApi: ServiceService\n  ) {}\n\n  ngOnInit(): void {\n    this.batchId = this.route.snapshot.paramMap.get('batchId');\n    this.minStartDate = this.getToday();\n\n    this.loadServices();\n\n    if (this.batchId) {\n      this.loadBatchForEdit(this.batchId);\n    }\n  }\n\n  // ðŸ”¹ Load all services\n  loadServices(): void {\n    this.serviceApi.getServices().subscribe({\n      next: res => this.services = res,\n      error: err => console.error('Service load error', err)\n    });\n  }\n\n  // ðŸ”¹ Load batch data in edit mode\n  loadBatchForEdit(batchId: string): void {\n    this.batchApi.getBatchById(batchId).subscribe({\n      next: batch => {\n        this.batchName = batch.batchName;\n        this.description = batch.description;\n        this.price = batch.price;\n        this.totalSeats = batch.totalSeats;\n        this.startDate = batch.startDate?.split('T')[0];\n        this.serviceId = batch.serviceId;\n        this.mobileNumber = batch.mobileNumber;\n      },\n      error: err => {\n        console.error('Batch load failed', err);\n        alert('Unable to load batch');\n        this.router.navigate(['/instructor/batches']);\n      }\n    });\n  }\n\n  // ðŸ”¹ Create / Update submit\n  submitBatch(): void {\n    if (this.isSubmitting) return;\n\n    this.isSubmitting = true;\n\n    const payload = {\n      batchName: this.batchName,\n      description: this.description,\n      price: this.price,\n      startDate: this.startDate,\n      serviceId: this.serviceId,\n      totalSeats: this.totalSeats,\n      mobileNumber: this.mobileNumber\n    };\n\n    if (this.batchId) {\n      // âœï¸ UPDATE\n      this.batchApi.updateBatch(this.batchId, payload).subscribe({\n        next: () => {\n          alert('Batch updated successfully');\n          this.router.navigate(['/instructor/batches']);\n        },\n        error: err => {\n          console.error(err);\n          alert('Update failed');\n          this.isSubmitting = false;\n        }\n      });\n    } else {\n      // âž• CREATE\n      this.batchApi.createBatch(payload).subscribe({\n        next: () => {\n          alert('Batch created successfully');\n          this.router.navigate(['/instructor/batches']);\n        },\n        error: err => {\n          console.error(err);\n          alert('Create failed');\n          this.isSubmitting = false;\n        }\n      });\n    }\n  }\n\n  // ðŸ”¹ Utility\n  getToday(): string {\n    const today = new Date();\n    return today.toISOString().split('T')[0];\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}