{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/booking.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction MyBookingsComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵelement(1, \"i\", 5);\n    i0.ɵɵelementStart(2, \"p\", 6);\n    i0.ɵɵtext(3, \"You have not booked any batches yet.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction MyBookingsComponent_div_4_ng_container_1_div_1_button_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function MyBookingsComponent_div_4_ng_container_1_div_1_button_18_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const booking_r3 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.makePayment(booking_r3));\n    });\n    i0.ɵɵtext(1, \" Pay Now \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MyBookingsComponent_div_4_ng_container_1_div_1_button_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 24);\n    i0.ɵɵtext(1, \" Paid \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MyBookingsComponent_div_4_ng_container_1_div_1_button_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function MyBookingsComponent_div_4_ng_container_1_div_1_button_20_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const booking_r3 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r11.cancelBooking(booking_r3));\n    });\n    i0.ɵɵtext(1, \" Cancel \");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a0, a1, a2) {\n  return {\n    \"bg-warning text-dark\": a0,\n    \"bg-success\": a1,\n    \"bg-secondary\": a2\n  };\n};\nfunction MyBookingsComponent_div_4_ng_container_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10)(1, \"div\", 11)(2, \"h5\", 12);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 13);\n    i0.ɵɵelement(5, \"i\", 14);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 13);\n    i0.ɵɵelement(8, \"i\", 15);\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\", 16);\n    i0.ɵɵelement(12, \"i\", 17);\n    i0.ɵɵtext(13);\n    i0.ɵɵpipe(14, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"span\", 18);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 19);\n    i0.ɵɵtemplate(18, MyBookingsComponent_div_4_ng_container_1_div_1_button_18_Template, 2, 0, \"button\", 20);\n    i0.ɵɵtemplate(19, MyBookingsComponent_div_4_ng_container_1_div_1_button_19_Template, 2, 0, \"button\", 21);\n    i0.ɵɵtemplate(20, MyBookingsComponent_div_4_ng_container_1_div_1_button_20_Template, 2, 0, \"button\", 22);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const booking_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(booking_r3.batch == null ? null : booking_r3.batch.batchName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" Instructor: \", booking_r3.batch == null ? null : booking_r3.batch.instructor == null ? null : booking_r3.batch.instructor.name, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" Start Date: \", i0.ɵɵpipeBind1(10, 9, booking_r3.batch == null ? null : booking_r3.batch.startDate), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" Booked on: \", i0.ɵɵpipeBind1(14, 11, booking_r3.bookingDate), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(13, _c0, booking_r3.status === \"Pending\", booking_r3.status === \"Confirmed\", booking_r3.status === \"Cancelled\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", booking_r3.status === \"Confirmed\" ? \"Paid\" : booking_r3.status, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", booking_r3.status === \"Pending\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", booking_r3.status === \"Confirmed\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", booking_r3.status === \"Pending\");\n  }\n}\nfunction MyBookingsComponent_div_4_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MyBookingsComponent_div_4_ng_container_1_div_1_Template, 21, 17, \"div\", 9);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const booking_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", booking_r3.status !== \"Cancelled\");\n  }\n}\nfunction MyBookingsComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵtemplate(1, MyBookingsComponent_div_4_ng_container_1_Template, 2, 1, \"ng-container\", 8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.bookings);\n  }\n}\nexport class MyBookingsComponent {\n  constructor(bookingService, router) {\n    this.bookingService = bookingService;\n    this.router = router;\n    this.bookings = [];\n  }\n  ngOnInit() {\n    this.loadBookings();\n  }\n  loadBookings() {\n    const userId = localStorage.getItem(\"userId\");\n    if (!userId) {\n      alert(\"Please login again.\");\n      this.router.navigate(['/login']);\n      return;\n    }\n    this.bookingService.getBookingsByUser(userId).subscribe({\n      next: res => {\n        // ✅ Normalize status\n        this.bookings = res.map(b => ({\n          ...b,\n          status: b.status ?? 'Pending'\n        }));\n      },\n      error: err => console.error(err)\n    });\n  }\n  makePayment(booking) {\n    this.router.navigate(['/user/payment'], {\n      state: {\n        bookingId: booking.bookingId,\n        amount: booking.batch.price\n      }\n    });\n  }\n  cancelBooking(booking) {\n    if (!booking?.bookingId) {\n      console.error('Invalid booking object', booking);\n      return;\n    }\n    if (!confirm('Are you sure you want to cancel this booking?')) return;\n    this.bookingService.cancelBooking(booking.bookingId).subscribe({\n      next: () => {\n        booking.status = 'Cancelled';\n      },\n      error: err => {\n        console.error(err);\n        alert(err.error?.message || 'Failed to cancel booking');\n      }\n    });\n  }\n  static {\n    this.ɵfac = function MyBookingsComponent_Factory(t) {\n      return new (t || MyBookingsComponent)(i0.ɵɵdirectiveInject(i1.BookingService), i0.ɵɵdirectiveInject(i2.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: MyBookingsComponent,\n      selectors: [[\"app-my-bookings\"]],\n      decls: 5,\n      vars: 2,\n      consts: [[1, \"container\", \"mt-4\"], [1, \"page-heading\", \"mb-4\"], [\"class\", \"text-center text-muted mt-5\", 4, \"ngIf\"], [\"class\", \"row g-4\", 4, \"ngIf\"], [1, \"text-center\", \"text-muted\", \"mt-5\"], [1, \"bi\", \"bi-info-circle\", \"fs-2\"], [1, \"mt-2\"], [1, \"row\", \"g-4\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"col-md-4\", 4, \"ngIf\"], [1, \"col-md-4\"], [1, \"card\", \"card-custom\", \"shadow-sm\"], [1, \"fw-bold\"], [1, \"text-muted\", \"mb-1\"], [1, \"bi\", \"bi-person-badge\"], [1, \"bi\", \"bi-calendar-event\"], [1, \"mb-2\"], [1, \"bi\", \"bi-clock-history\"], [1, \"badge\", 3, \"ngClass\"], [1, \"d-flex\", \"gap-2\", \"mt-3\"], [\"class\", \"btn btn-primary-custom flex-fill\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"btn btn-success flex-fill\", \"disabled\", \"\", 4, \"ngIf\"], [\"class\", \"btn btn-cancel-custom flex-fill\", 3, \"click\", 4, \"ngIf\"], [1, \"btn\", \"btn-primary-custom\", \"flex-fill\", 3, \"click\"], [\"disabled\", \"\", 1, \"btn\", \"btn-success\", \"flex-fill\"], [1, \"btn\", \"btn-cancel-custom\", \"flex-fill\", 3, \"click\"]],\n      template: function MyBookingsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\", 1);\n          i0.ɵɵtext(2, \"My Bookings\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(3, MyBookingsComponent_div_3_Template, 4, 0, \"div\", 2);\n          i0.ɵɵtemplate(4, MyBookingsComponent_div_4_Template, 2, 1, \"div\", 3);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.bookings.length === 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.bookings.length > 0);\n        }\n      },\n      dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i3.DatePipe],\n      styles: [\"\\n\\n\\n\\n.page-heading[_ngcontent-%COMP%] {\\n  font-weight: 700;\\n  color: #6d28d9; \\n\\n}\\n\\n\\n\\n\\n\\n.card-custom[_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #fdf4ff, #f3e8ff);\\n  border-radius: 16px;\\n  padding: 20px;\\n  border: none;\\n  transition: transform 0.25s ease, box-shadow 0.25s ease;\\n}\\n\\n.card-custom[_ngcontent-%COMP%]:hover {\\n  transform: translateY(-4px);\\n  box-shadow: 0 12px 30px rgba(109, 40, 217, 0.15);\\n}\\n\\n\\n\\n\\n\\n.card-custom[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\\n  color: #6d28d9;\\n}\\n\\n.card-custom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  font-size: 14px;\\n  color: #4b5563;\\n}\\n\\n\\n\\n\\n\\n.badge[_ngcontent-%COMP%] {\\n  padding: 6px 14px;\\n  border-radius: 999px;\\n  font-size: 13px;\\n  font-weight: 600;\\n  display: inline-block;\\n}\\n\\n\\n\\n.bg-warning[_ngcontent-%COMP%] {\\n  background-color: #fef3c7 !important;\\n  color: #92400e !important;\\n}\\n\\n\\n\\n.bg-success[_ngcontent-%COMP%] {\\n  background-color: #dcfce7 !important;\\n  color: #166534 !important;\\n}\\n\\n\\n\\n.bg-secondary[_ngcontent-%COMP%] {\\n  background-color: #e5e7eb !important;\\n  color: #374151 !important;\\n}\\n\\n\\n\\n\\n\\n.btn-primary-custom[_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #8b5cf6, #6d28d9);\\n  border: none;\\n  color: #ffffff;\\n  font-weight: 600;\\n  border-radius: 12px;\\n  padding: 10px;\\n  transition: all 0.25s ease;\\n}\\n\\n.btn-primary-custom[_ngcontent-%COMP%]:hover {\\n  background: linear-gradient(135deg, #7c3aed, #5b21b6);\\n  box-shadow: 0 6px 18px rgba(109, 40, 217, 0.35);\\n}\\n\\n\\n\\n.btn-success[_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #22c55e, #16a34a);\\n  border: none;\\n  color: #ffffff;\\n  font-weight: 600;\\n  border-radius: 12px;\\n  padding: 10px;\\n  cursor: default;\\n}\\n\\n\\n\\n.btn-cancel-custom[_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #fda4af, #f43f5e);\\n  border: none;\\n  color: #ffffff;\\n  font-weight: 600;\\n  border-radius: 12px;\\n  padding: 10px;\\n  transition: all 0.25s ease;\\n}\\n\\n.btn-cancel-custom[_ngcontent-%COMP%]:hover {\\n  background: linear-gradient(135deg, #fb7185, #e11d48);\\n  box-shadow: 0 6px 18px rgba(244, 63, 94, 0.35);\\n}\\n\\n\\n\\n\\n\\n.text-muted[_ngcontent-%COMP%] {\\n  color: #6b7280 !important;\\n}\\n\\n\\n\\n\\n\\n@media (max-width: 768px) {\\n  .card-custom[_ngcontent-%COMP%] {\\n    padding: 16px;\\n  }\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdXNlci9teS1ib29raW5ncy9teS1ib29raW5ncy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztrQ0FFa0M7QUFDbEM7RUFDRSxnQkFBZ0I7RUFDaEIsY0FBYyxFQUFFLGlCQUFpQjtBQUNuQzs7QUFFQTs7a0NBRWtDO0FBQ2xDO0VBQ0UscURBQXFEO0VBQ3JELG1CQUFtQjtFQUNuQixhQUFhO0VBQ2IsWUFBWTtFQUNaLHVEQUF1RDtBQUN6RDs7QUFFQTtFQUNFLDJCQUEyQjtFQUMzQixnREFBZ0Q7QUFDbEQ7O0FBRUE7O2tDQUVrQztBQUNsQztFQUNFLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxlQUFlO0VBQ2YsY0FBYztBQUNoQjs7QUFFQTs7a0NBRWtDO0FBQ2xDO0VBQ0UsaUJBQWlCO0VBQ2pCLG9CQUFvQjtFQUNwQixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLHFCQUFxQjtBQUN2Qjs7QUFFQSxZQUFZO0FBQ1o7RUFDRSxvQ0FBb0M7RUFDcEMseUJBQXlCO0FBQzNCOztBQUVBLFdBQVc7QUFDWDtFQUNFLG9DQUFvQztFQUNwQyx5QkFBeUI7QUFDM0I7O0FBRUEsY0FBYztBQUNkO0VBQ0Usb0NBQW9DO0VBQ3BDLHlCQUF5QjtBQUMzQjs7QUFFQTs7a0NBRWtDO0FBQ2xDO0VBQ0UscURBQXFEO0VBQ3JELFlBQVk7RUFDWixjQUFjO0VBQ2QsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQixhQUFhO0VBQ2IsMEJBQTBCO0FBQzVCOztBQUVBO0VBQ0UscURBQXFEO0VBQ3JELCtDQUErQztBQUNqRDs7QUFFQSxnQkFBZ0I7QUFDaEI7RUFDRSxxREFBcUQ7RUFDckQsWUFBWTtFQUNaLGNBQWM7RUFDZCxnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLGFBQWE7RUFDYixlQUFlO0FBQ2pCOztBQUVBLGtCQUFrQjtBQUNsQjtFQUNFLHFEQUFxRDtFQUNyRCxZQUFZO0VBQ1osY0FBYztFQUNkLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsYUFBYTtFQUNiLDBCQUEwQjtBQUM1Qjs7QUFFQTtFQUNFLHFEQUFxRDtFQUNyRCw4Q0FBOEM7QUFDaEQ7O0FBRUE7O2tDQUVrQztBQUNsQztFQUNFLHlCQUF5QjtBQUMzQjs7QUFFQTs7a0NBRWtDO0FBQ2xDO0VBQ0U7SUFDRSxhQUFhO0VBQ2Y7QUFDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgUEFHRSBIRUFESU5HXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcbi5wYWdlLWhlYWRpbmcge1xyXG4gIGZvbnQtd2VpZ2h0OiA3MDA7XHJcbiAgY29sb3I6ICM2ZDI4ZDk7IC8qIFB1cnBsZSB0aGVtZSAqL1xyXG59XHJcblxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgIEJPT0tJTkcgQ0FSRFxyXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG4uY2FyZC1jdXN0b20ge1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmZGY0ZmYsICNmM2U4ZmYpO1xyXG4gIGJvcmRlci1yYWRpdXM6IDE2cHg7XHJcbiAgcGFkZGluZzogMjBweDtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMjVzIGVhc2UsIGJveC1zaGFkb3cgMC4yNXMgZWFzZTtcclxufVxyXG5cclxuLmNhcmQtY3VzdG9tOmhvdmVyIHtcclxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTRweCk7XHJcbiAgYm94LXNoYWRvdzogMCAxMnB4IDMwcHggcmdiYSgxMDksIDQwLCAyMTcsIDAuMTUpO1xyXG59XHJcblxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgIFRFWFQgU1RZTEVTXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcbi5jYXJkLWN1c3RvbSBoNSB7XHJcbiAgY29sb3I6ICM2ZDI4ZDk7XHJcbn1cclxuXHJcbi5jYXJkLWN1c3RvbSBwIHtcclxuICBmb250LXNpemU6IDE0cHg7XHJcbiAgY29sb3I6ICM0YjU1NjM7XHJcbn1cclxuXHJcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgU1RBVFVTIEJBREdFU1xyXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG4uYmFkZ2Uge1xyXG4gIHBhZGRpbmc6IDZweCAxNHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDk5OXB4O1xyXG4gIGZvbnQtc2l6ZTogMTNweDtcclxuICBmb250LXdlaWdodDogNjAwO1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxufVxyXG5cclxuLyogUGVuZGluZyAqL1xyXG4uYmctd2FybmluZyB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZlZjNjNyAhaW1wb3J0YW50O1xyXG4gIGNvbG9yOiAjOTI0MDBlICFpbXBvcnRhbnQ7XHJcbn1cclxuXHJcbi8qIEJvb2tlZCAqL1xyXG4uYmctc3VjY2VzcyB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2RjZmNlNyAhaW1wb3J0YW50O1xyXG4gIGNvbG9yOiAjMTY2NTM0ICFpbXBvcnRhbnQ7XHJcbn1cclxuXHJcbi8qIENhbmNlbGxlZCAqL1xyXG4uYmctc2Vjb25kYXJ5IHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTVlN2ViICFpbXBvcnRhbnQ7XHJcbiAgY29sb3I6ICMzNzQxNTEgIWltcG9ydGFudDtcclxufVxyXG5cclxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICBCVVRUT05TXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcbi5idG4tcHJpbWFyeS1jdXN0b20ge1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM4YjVjZjYsICM2ZDI4ZDkpO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBjb2xvcjogI2ZmZmZmZjtcclxuICBmb250LXdlaWdodDogNjAwO1xyXG4gIGJvcmRlci1yYWRpdXM6IDEycHg7XHJcbiAgcGFkZGluZzogMTBweDtcclxuICB0cmFuc2l0aW9uOiBhbGwgMC4yNXMgZWFzZTtcclxufVxyXG5cclxuLmJ0bi1wcmltYXJ5LWN1c3RvbTpob3ZlciB7XHJcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzdjM2FlZCwgIzViMjFiNik7XHJcbiAgYm94LXNoYWRvdzogMCA2cHggMThweCByZ2JhKDEwOSwgNDAsIDIxNywgMC4zNSk7XHJcbn1cclxuXHJcbi8qIFBhaWQgYnV0dG9uICovXHJcbi5idG4tc3VjY2VzcyB7XHJcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzIyYzU1ZSwgIzE2YTM0YSk7XHJcbiAgYm9yZGVyOiBub25lO1xyXG4gIGNvbG9yOiAjZmZmZmZmO1xyXG4gIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgYm9yZGVyLXJhZGl1czogMTJweDtcclxuICBwYWRkaW5nOiAxMHB4O1xyXG4gIGN1cnNvcjogZGVmYXVsdDtcclxufVxyXG5cclxuLyogQ2FuY2VsIGJ1dHRvbiAqL1xyXG4uYnRuLWNhbmNlbC1jdXN0b20ge1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmZGE0YWYsICNmNDNmNWUpO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBjb2xvcjogI2ZmZmZmZjtcclxuICBmb250LXdlaWdodDogNjAwO1xyXG4gIGJvcmRlci1yYWRpdXM6IDEycHg7XHJcbiAgcGFkZGluZzogMTBweDtcclxuICB0cmFuc2l0aW9uOiBhbGwgMC4yNXMgZWFzZTtcclxufVxyXG5cclxuLmJ0bi1jYW5jZWwtY3VzdG9tOmhvdmVyIHtcclxuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjZmI3MTg1LCAjZTExZDQ4KTtcclxuICBib3gtc2hhZG93OiAwIDZweCAxOHB4IHJnYmEoMjQ0LCA2MywgOTQsIDAuMzUpO1xyXG59XHJcblxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgIEVNUFRZIFNUQVRFXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcbi50ZXh0LW11dGVkIHtcclxuICBjb2xvcjogIzZiNzI4MCAhaW1wb3J0YW50O1xyXG59XHJcblxyXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgIFJFU1BPTlNJVkVcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XHJcbiAgLmNhcmQtY3VzdG9tIHtcclxuICAgIHBhZGRpbmc6IDE2cHg7XHJcbiAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵlistener","MyBookingsComponent_div_4_ng_container_1_div_1_button_18_Template_button_click_0_listener","ɵɵrestoreView","_r10","booking_r3","ɵɵnextContext","$implicit","ctx_r8","ɵɵresetView","makePayment","MyBookingsComponent_div_4_ng_container_1_div_1_button_20_Template_button_click_0_listener","_r13","ctx_r11","cancelBooking","ɵɵtemplate","MyBookingsComponent_div_4_ng_container_1_div_1_button_18_Template","MyBookingsComponent_div_4_ng_container_1_div_1_button_19_Template","MyBookingsComponent_div_4_ng_container_1_div_1_button_20_Template","ɵɵadvance","ɵɵtextInterpolate","batch","batchName","ɵɵtextInterpolate1","instructor","name","ɵɵpipeBind1","startDate","bookingDate","ɵɵproperty","ɵɵpureFunction3","_c0","status","ɵɵelementContainerStart","MyBookingsComponent_div_4_ng_container_1_div_1_Template","ɵɵelementContainerEnd","MyBookingsComponent_div_4_ng_container_1_Template","ctx_r1","bookings","MyBookingsComponent","constructor","bookingService","router","ngOnInit","loadBookings","userId","localStorage","getItem","alert","navigate","getBookingsByUser","subscribe","next","res","map","b","error","err","console","booking","state","bookingId","amount","price","confirm","message","ɵɵdirectiveInject","i1","BookingService","i2","Router","selectors","decls","vars","consts","template","MyBookingsComponent_Template","rf","ctx","MyBookingsComponent_div_3_Template","MyBookingsComponent_div_4_Template","length"],"sources":["C:\\Users\\Sagar\\OneDrive\\Desktop\\Hairstylist Amar\\HairstylistAmar-Client-Angular\\HairStylistAmar\\src\\app\\user\\my-bookings\\my-bookings.component.ts","C:\\Users\\Sagar\\OneDrive\\Desktop\\Hairstylist Amar\\HairstylistAmar-Client-Angular\\HairStylistAmar\\src\\app\\user\\my-bookings\\my-bookings.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { BookingService } from '../../services/booking.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-my-bookings',\n  templateUrl: './my-bookings.component.html',\n  styleUrls: ['./my-bookings.component.css']\n})\nexport class MyBookingsComponent implements OnInit {\n\n  bookings: any[] = [];\n\n  constructor(\n    private bookingService: BookingService,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n    this.loadBookings();\n  }\n\n  loadBookings() {\n    const userId = localStorage.getItem(\"userId\");\n\n    if (!userId) {\n      alert(\"Please login again.\");\n      this.router.navigate(['/login']);\n      return;\n    }\n\n    this.bookingService.getBookingsByUser(userId).subscribe({\n      next: (res: any[]) => {\n        // ✅ Normalize status\n        this.bookings = res.map(b => ({\n          ...b,\n          status: b.status ?? 'Pending'\n        }));\n      },\n      error: (err) => console.error(err)\n    });\n  }\n\n  makePayment(booking: any) {\n    this.router.navigate(['/user/payment'], {\n      state: {\n        bookingId: booking.bookingId,\n        amount: booking.batch.price\n      }\n    });\n  }\n\n  cancelBooking(booking: any) {\n    if (!booking?.bookingId) {\n      console.error('Invalid booking object', booking);\n      return;\n    }\n\n    if (!confirm('Are you sure you want to cancel this booking?')) return;\n\n    this.bookingService.cancelBooking(booking.bookingId).subscribe({\n      next: () => {\n        booking.status = 'Cancelled';\n      },\n      error: (err) => {\n        console.error(err);\n        alert(err.error?.message || 'Failed to cancel booking');\n      }\n    });\n  }\n}\n","<div class=\"container mt-4\">\n  <!-- Page Heading -->\n  <h2 class=\"page-heading mb-4\">My Bookings</h2>\n\n  <!-- No bookings -->\n  <div *ngIf=\"bookings.length === 0\" class=\"text-center text-muted mt-5\">\n    <i class=\"bi bi-info-circle fs-2\"></i>\n    <p class=\"mt-2\">You have not booked any batches yet.</p>\n  </div>\n\n  <!-- Bookings Grid -->\n  <div class=\"row g-4\" *ngIf=\"bookings.length > 0\">\n    <ng-container *ngFor=\"let booking of bookings\">\n      <div class=\"col-md-4\" *ngIf=\"booking.status !== 'Cancelled'\">\n        <div class=\"card card-custom shadow-sm\">\n\n          <h5 class=\"fw-bold\">{{ booking.batch?.batchName }}</h5>\n\n          <p class=\"text-muted mb-1\">\n            <i class=\"bi bi-person-badge\"></i>\n            Instructor: {{ booking.batch?.instructor?.name }}\n          </p>\n\n          <p class=\"text-muted mb-1\">\n            <i class=\"bi bi-calendar-event\"></i>\n            Start Date: {{ booking.batch?.startDate | date }}\n          </p>\n\n          <p class=\"mb-2\">\n            <i class=\"bi bi-clock-history\"></i>\n            Booked on: {{ booking.bookingDate | date }}\n          </p>\n\n          <!-- ✅ STATUS BADGE -->\n          <span\n            class=\"badge\"\n            [ngClass]=\"{\n              'bg-warning text-dark': booking.status === 'Pending',\n              'bg-success': booking.status === 'Confirmed',\n              'bg-secondary': booking.status === 'Cancelled'\n            }\">\n            {{ booking.status === 'Confirmed' ? 'Paid' : booking.status }}\n          </span>\n\n          <!-- ✅ ACTIONS -->\n          <div class=\"d-flex gap-2 mt-3\">\n\n            <!-- Pay Now (ONLY Pending) -->\n            <button\n              *ngIf=\"booking.status === 'Pending'\"\n              class=\"btn btn-primary-custom flex-fill\"\n              (click)=\"makePayment(booking)\">\n              Pay Now\n            </button>\n\n            <!-- Paid (ONLY Confirmed) -->\n            <button\n              *ngIf=\"booking.status === 'Confirmed'\"\n              class=\"btn btn-success flex-fill\"\n              disabled>\n              Paid\n            </button>\n\n            <!-- Cancel (ONLY Pending) -->\n            <button\n              *ngIf=\"booking.status === 'Pending'\"\n              class=\"btn btn-cancel-custom flex-fill\"\n              (click)=\"cancelBooking(booking)\">\n              Cancel\n            </button>\n\n          </div>\n\n        </div>\n      </div>\n    </ng-container>\n  </div>\n</div>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}