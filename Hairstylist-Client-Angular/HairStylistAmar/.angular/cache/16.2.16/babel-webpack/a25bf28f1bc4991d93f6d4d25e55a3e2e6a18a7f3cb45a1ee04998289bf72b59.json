{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let BookBatchComponent = class BookBatchComponent {\n  constructor(serviceApi, batchApi, bookingApi, router) {\n    this.serviceApi = serviceApi;\n    this.batchApi = batchApi;\n    this.bookingApi = bookingApi;\n    this.router = router;\n    this.services = [];\n    this.batches = [];\n    this.selectedServiceId = '';\n    this.isLoading = false;\n  }\n  ngOnInit() {\n    this.loadServices();\n  }\n  // Load all services\n  loadServices() {\n    this.serviceApi.getAllServices().subscribe({\n      next: res => {\n        this.services = res;\n      },\n      error: err => console.error(\"Error loading services:\", err)\n    });\n  }\n  // Load batches for selected service\n  loadBatches() {\n    if (!this.selectedServiceId) {\n      this.batches = [];\n      return;\n    }\n    this.isLoading = true;\n    this.batchApi.getAllBatches(this.selectedServiceId).subscribe({\n      next: res => {\n        this.batches = res;\n        this.isLoading = false;\n      },\n      error: err => {\n        console.error(\"Error loading batches:\", err);\n        this.isLoading = false;\n      }\n    });\n  }\n  // Book a batch\n  bookBatch(batchId) {\n    const userId = localStorage.getItem(\"userId\");\n    if (!userId) {\n      alert(\"Please login again.\");\n      this.router.navigate(['/login']);\n      return;\n    }\n    const bookingData = {\n      userId: userId,\n      batchId: batchId,\n      bookingDate: new Date()\n    };\n    this.bookingApi.createBooking(bookingData).subscribe({\n      next: res => {\n        alert(\"Batch booked successfully!\");\n        // Redirect to payment screen\n        this.router.navigate(['/user/payment'], {\n          state: {\n            bookingId: res.bookingId,\n            amount: res.amount\n          }\n        });\n      },\n      error: err => console.error(\"Error booking batch:\", err)\n    });\n  }\n};\nBookBatchComponent = __decorate([Component({\n  selector: 'app-book-batch',\n  templateUrl: './book-batch.component.html',\n  styleUrls: ['./book-batch.component.css']\n})], BookBatchComponent);","map":{"version":3,"names":["Component","BookBatchComponent","constructor","serviceApi","batchApi","bookingApi","router","services","batches","selectedServiceId","isLoading","ngOnInit","loadServices","getAllServices","subscribe","next","res","error","err","console","loadBatches","getAllBatches","bookBatch","batchId","userId","localStorage","getItem","alert","navigate","bookingData","bookingDate","Date","createBooking","state","bookingId","amount","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\Sagar\\OneDrive\\Desktop\\Hairstylist Amar\\HairstylistAmar-Client-Angular\\HairStylistAmar\\src\\app\\user\\book-batch\\book-batch.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ServiceService } from 'src/app/services/service.service';\nimport { BatchService } from 'src/app/services/batch.service';\nimport { BookingService } from 'src/app/services/booking.service';\n\n@Component({\n  selector: 'app-book-batch',\n  templateUrl: './book-batch.component.html',\n  styleUrls: ['./book-batch.component.css']\n})\nexport class BookBatchComponent implements OnInit {\n\n  services: any[] = [];\n  batches: any[] = [];\n\n  selectedServiceId: string = '';\n  isLoading = false;\n\n  constructor(\n    private serviceApi: ServiceService,\n    private batchApi: BatchService,\n    private bookingApi: BookingService,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n    this.loadServices();\n  }\n\n  // Load all services\n  loadServices() {\n    this.serviceApi.getAllServices().subscribe({\n      next: (res: any) => {\n        this.services = res;\n      },\n      error: (err: any) => console.error(\"Error loading services:\", err)\n    });\n  }\n\n  // Load batches for selected service\n  loadBatches() {\n    if (!this.selectedServiceId) {\n      this.batches = [];\n      return;\n    }\n\n    this.isLoading = true;\n\n    this.batchApi.getAllBatches(this.selectedServiceId).subscribe({\n      next: (res: any) => {\n        this.batches = res;\n        this.isLoading = false;\n      },\n      error: (err) => {\n        console.error(\"Error loading batches:\", err);\n        this.isLoading = false;\n      }\n    });\n  }\n\n  // Book a batch\n  bookBatch(batchId: string) {\n    const userId = localStorage.getItem(\"userId\");\n\n    if (!userId) {\n      alert(\"Please login again.\");\n      this.router.navigate(['/login']);\n      return;\n    }\n\n    const bookingData = {\n      userId: userId,\n      batchId: batchId,\n      bookingDate: new Date()\n    };\n\n    this.bookingApi.createBooking(bookingData).subscribe({\n      next: (res: any) => {\n        alert(\"Batch booked successfully!\");\n\n        // Redirect to payment screen\n        this.router.navigate(['/user/payment'], {\n          state: {\n            bookingId: res.bookingId,\n            amount: res.amount\n          }\n        });\n      },\n      error: (err) => console.error(\"Error booking batch:\", err)\n    });\n  }\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAW1C,WAAMC,kBAAkB,GAAxB,MAAMA,kBAAkB;EAQ7BC,YACUC,UAA0B,EAC1BC,QAAsB,EACtBC,UAA0B,EAC1BC,MAAc;IAHd,KAAAH,UAAU,GAAVA,UAAU;IACV,KAAAC,QAAQ,GAARA,QAAQ;IACR,KAAAC,UAAU,GAAVA,UAAU;IACV,KAAAC,MAAM,GAANA,MAAM;IAVhB,KAAAC,QAAQ,GAAU,EAAE;IACpB,KAAAC,OAAO,GAAU,EAAE;IAEnB,KAAAC,iBAAiB,GAAW,EAAE;IAC9B,KAAAC,SAAS,GAAG,KAAK;EAOd;EAEHC,QAAQA,CAAA;IACN,IAAI,CAACC,YAAY,EAAE;EACrB;EAEA;EACAA,YAAYA,CAAA;IACV,IAAI,CAACT,UAAU,CAACU,cAAc,EAAE,CAACC,SAAS,CAAC;MACzCC,IAAI,EAAGC,GAAQ,IAAI;QACjB,IAAI,CAACT,QAAQ,GAAGS,GAAG;MACrB,CAAC;MACDC,KAAK,EAAGC,GAAQ,IAAKC,OAAO,CAACF,KAAK,CAAC,yBAAyB,EAAEC,GAAG;KAClE,CAAC;EACJ;EAEA;EACAE,WAAWA,CAAA;IACT,IAAI,CAAC,IAAI,CAACX,iBAAiB,EAAE;MAC3B,IAAI,CAACD,OAAO,GAAG,EAAE;MACjB;;IAGF,IAAI,CAACE,SAAS,GAAG,IAAI;IAErB,IAAI,CAACN,QAAQ,CAACiB,aAAa,CAAC,IAAI,CAACZ,iBAAiB,CAAC,CAACK,SAAS,CAAC;MAC5DC,IAAI,EAAGC,GAAQ,IAAI;QACjB,IAAI,CAACR,OAAO,GAAGQ,GAAG;QAClB,IAAI,CAACN,SAAS,GAAG,KAAK;MACxB,CAAC;MACDO,KAAK,EAAGC,GAAG,IAAI;QACbC,OAAO,CAACF,KAAK,CAAC,wBAAwB,EAAEC,GAAG,CAAC;QAC5C,IAAI,CAACR,SAAS,GAAG,KAAK;MACxB;KACD,CAAC;EACJ;EAEA;EACAY,SAASA,CAACC,OAAe;IACvB,MAAMC,MAAM,GAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;IAE7C,IAAI,CAACF,MAAM,EAAE;MACXG,KAAK,CAAC,qBAAqB,CAAC;MAC5B,IAAI,CAACrB,MAAM,CAACsB,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;MAChC;;IAGF,MAAMC,WAAW,GAAG;MAClBL,MAAM,EAAEA,MAAM;MACdD,OAAO,EAAEA,OAAO;MAChBO,WAAW,EAAE,IAAIC,IAAI;KACtB;IAED,IAAI,CAAC1B,UAAU,CAAC2B,aAAa,CAACH,WAAW,CAAC,CAACf,SAAS,CAAC;MACnDC,IAAI,EAAGC,GAAQ,IAAI;QACjBW,KAAK,CAAC,4BAA4B,CAAC;QAEnC;QACA,IAAI,CAACrB,MAAM,CAACsB,QAAQ,CAAC,CAAC,eAAe,CAAC,EAAE;UACtCK,KAAK,EAAE;YACLC,SAAS,EAAElB,GAAG,CAACkB,SAAS;YACxBC,MAAM,EAAEnB,GAAG,CAACmB;;SAEf,CAAC;MACJ,CAAC;MACDlB,KAAK,EAAGC,GAAG,IAAKC,OAAO,CAACF,KAAK,CAAC,sBAAsB,EAAEC,GAAG;KAC1D,CAAC;EACJ;CACD;AAjFYjB,kBAAkB,GAAAmC,UAAA,EAL9BpC,SAAS,CAAC;EACTqC,QAAQ,EAAE,gBAAgB;EAC1BC,WAAW,EAAE,6BAA6B;EAC1CC,SAAS,EAAE,CAAC,4BAA4B;CACzC,CAAC,C,EACWtC,kBAAkB,CAiF9B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}