{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport class AuthStorageService {\n  constructor() {\n    // üîÅ REACTIVE ROLE STATE (NEW)\n    this.roleSubject = new BehaviorSubject(localStorage.getItem('role'));\n    this.role$ = this.roleSubject.asObservable();\n  }\n  // -----------------------------\n  // EXISTING METHOD (MODIFIED)\n  // -----------------------------\n  saveLogin(res) {\n    localStorage.setItem('token', res.token);\n    localStorage.setItem('userId', res.userId);\n    if (res.role) {\n      localStorage.setItem('role', res.role);\n      this.roleSubject.next(res.role); // üî• notify navbar\n    }\n  }\n  // -----------------------------\n  // TOKEN HELPERS\n  // -----------------------------\n  setToken(token) {\n    localStorage.setItem('token', token);\n  }\n  getToken() {\n    return localStorage.getItem('token');\n  }\n  // -----------------------------\n  // USER ID HELPERS\n  // -----------------------------\n  setUserId(userId) {\n    localStorage.setItem('userId', userId);\n  }\n  getUserId() {\n    return localStorage.getItem('userId');\n  }\n  // -----------------------------\n  // ROLE HELPERS (MODIFIED)\n  // -----------------------------\n  setRole(role) {\n    if (role) {\n      localStorage.setItem('role', role);\n    }\n    this.roleSubject.next(role); // üî• notify navbar\n  }\n\n  getRole() {\n    return localStorage.getItem('role');\n  }\n  // -----------------------------\n  // returnUrl helpers (KEEP)\n  // -----------------------------\n  get returnUrl() {\n    return localStorage.getItem('returnUrl');\n  }\n  setReturnUrl(url) {\n    localStorage.setItem('returnUrl', url);\n  }\n  clearReturnUrl() {\n    localStorage.removeItem('returnUrl');\n  }\n  // -----------------------------\n  // CLEAR ALL (MODIFIED)\n  // -----------------------------\n  clearAll() {\n    localStorage.clear();\n    this.roleSubject.next(null); // üî• logout ‚Üí navbar updates\n  }\n\n  static {\n    this.…µfac = function AuthStorageService_Factory(t) {\n      return new (t || AuthStorageService)();\n    };\n  }\n  static {\n    this.…µprov = /*@__PURE__*/i0.…µ…µdefineInjectable({\n      token: AuthStorageService,\n      factory: AuthStorageService.…µfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["BehaviorSubject","AuthStorageService","constructor","roleSubject","localStorage","getItem","role$","asObservable","saveLogin","res","setItem","token","userId","role","next","setToken","getToken","setUserId","getUserId","setRole","getRole","returnUrl","setReturnUrl","url","clearReturnUrl","removeItem","clearAll","clear","factory","…µfac","providedIn"],"sources":["C:\\Users\\Sagar\\OneDrive\\Desktop\\Hairstylist Amar\\HairstylistAmar-Client-Angular\\HairStylistAmar\\src\\app\\core\\auth\\auth-storage.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\nexport type UserRole = 'User' | 'Instructor' | null;\n\n@Injectable({ providedIn: 'root' })\nexport class AuthStorageService {\n\n  // üîÅ REACTIVE ROLE STATE (NEW)\n  private roleSubject = new BehaviorSubject<UserRole>(\n    (localStorage.getItem('role') as UserRole) \n  );\n\n  role$ = this.roleSubject.asObservable();\n\n  // -----------------------------\n  // EXISTING METHOD (MODIFIED)\n  // -----------------------------\n  saveLogin(res: any): void {\n    localStorage.setItem('token', res.token);\n    localStorage.setItem('userId', res.userId);\n\n    if (res.role) {\n      localStorage.setItem('role', res.role);\n      this.roleSubject.next(res.role); // üî• notify navbar\n    }\n  }\n\n  // -----------------------------\n  // TOKEN HELPERS\n  // -----------------------------\n  setToken(token: string): void {\n    localStorage.setItem('token', token);\n  }\n\n  getToken(): string | null {\n    return localStorage.getItem('token');\n  }\n\n  // -----------------------------\n  // USER ID HELPERS\n  // -----------------------------\n  setUserId(userId: string): void {\n    localStorage.setItem('userId', userId);\n  }\n\n  getUserId(): string | null {\n    return localStorage.getItem('userId');\n  }\n\n  // -----------------------------\n  // ROLE HELPERS (MODIFIED)\n  // -----------------------------\n  setRole(role: UserRole): void {\n    if (role) {\n      localStorage.setItem('role', role);\n    }\n    this.roleSubject.next(role); // üî• notify navbar\n  }\n\n  getRole(): UserRole {\n    return localStorage.getItem('role') as UserRole;\n  }\n\n  // -----------------------------\n  // returnUrl helpers (KEEP)\n  // -----------------------------\n  get returnUrl(): string | null {\n    return localStorage.getItem('returnUrl');\n  }\n\n  setReturnUrl(url: string): void {\n    localStorage.setItem('returnUrl', url);\n  }\n\n  clearReturnUrl(): void {\n    localStorage.removeItem('returnUrl');\n  }\n\n  // -----------------------------\n  // CLEAR ALL (MODIFIED)\n  // -----------------------------\n  clearAll(): void {\n    localStorage.clear();\n    this.roleSubject.next(null); // üî• logout ‚Üí navbar updates\n  }\n}\n"],"mappings":"AACA,SAASA,eAAe,QAAQ,MAAM;;AAKtC,OAAM,MAAOC,kBAAkB;EAD/BC,YAAA;IAGE;IACQ,KAAAC,WAAW,GAAG,IAAIH,eAAe,CACtCI,YAAY,CAACC,OAAO,CAAC,MAAM,CAAc,CAC3C;IAED,KAAAC,KAAK,GAAG,IAAI,CAACH,WAAW,CAACI,YAAY,EAAE;;EAEvC;EACA;EACA;EACAC,SAASA,CAACC,GAAQ;IAChBL,YAAY,CAACM,OAAO,CAAC,OAAO,EAAED,GAAG,CAACE,KAAK,CAAC;IACxCP,YAAY,CAACM,OAAO,CAAC,QAAQ,EAAED,GAAG,CAACG,MAAM,CAAC;IAE1C,IAAIH,GAAG,CAACI,IAAI,EAAE;MACZT,YAAY,CAACM,OAAO,CAAC,MAAM,EAAED,GAAG,CAACI,IAAI,CAAC;MACtC,IAAI,CAACV,WAAW,CAACW,IAAI,CAACL,GAAG,CAACI,IAAI,CAAC,CAAC,CAAC;;EAErC;EAEA;EACA;EACA;EACAE,QAAQA,CAACJ,KAAa;IACpBP,YAAY,CAACM,OAAO,CAAC,OAAO,EAAEC,KAAK,CAAC;EACtC;EAEAK,QAAQA,CAAA;IACN,OAAOZ,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EACtC;EAEA;EACA;EACA;EACAY,SAASA,CAACL,MAAc;IACtBR,YAAY,CAACM,OAAO,CAAC,QAAQ,EAAEE,MAAM,CAAC;EACxC;EAEAM,SAASA,CAAA;IACP,OAAOd,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;EACvC;EAEA;EACA;EACA;EACAc,OAAOA,CAACN,IAAc;IACpB,IAAIA,IAAI,EAAE;MACRT,YAAY,CAACM,OAAO,CAAC,MAAM,EAAEG,IAAI,CAAC;;IAEpC,IAAI,CAACV,WAAW,CAACW,IAAI,CAACD,IAAI,CAAC,CAAC,CAAC;EAC/B;;EAEAO,OAAOA,CAAA;IACL,OAAOhB,YAAY,CAACC,OAAO,CAAC,MAAM,CAAa;EACjD;EAEA;EACA;EACA;EACA,IAAIgB,SAASA,CAAA;IACX,OAAOjB,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;EAC1C;EAEAiB,YAAYA,CAACC,GAAW;IACtBnB,YAAY,CAACM,OAAO,CAAC,WAAW,EAAEa,GAAG,CAAC;EACxC;EAEAC,cAAcA,CAAA;IACZpB,YAAY,CAACqB,UAAU,CAAC,WAAW,CAAC;EACtC;EAEA;EACA;EACA;EACAC,QAAQA,CAAA;IACNtB,YAAY,CAACuB,KAAK,EAAE;IACpB,IAAI,CAACxB,WAAW,CAACW,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;EAC/B;;;;uBA/EWb,kBAAkB;IAAA;EAAA;;;aAAlBA,kBAAkB;MAAA2B,OAAA,EAAlB3B,kBAAkB,CAAA4B,IAAA;MAAAC,UAAA,EADL;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}